(this["webpackJsonp@monopoly-money/client"]=this["webpackJsonp@monopoly-money/client"]||[]).push([[0],{100:function(e,a,t){},119:function(e,a,t){},120:function(e,a,t){},123:function(e,a,t){},124:function(e,a,t){"use strict";var n=t(125);Object.defineProperty(a,"__esModule",{value:!0}),a.defaultGameState={players:[],freeParkingBalance:0,open:!0},a.calculateGameState=function(e,a){return e.reduce((function(e,a){switch(a.type){case"playerJoin":return Object.assign(Object.assign({},e),{players:[].concat(n(e.players),[{playerId:a.playerId,name:a.name,banker:!1,balance:0}])});case"playerDelete":return Object.assign(Object.assign({},e),{players:e.players.filter((function(e){return e.playerId!==a.playerId}))});case"playerNameChange":return Object.assign(Object.assign({},e),{players:e.players.map((function(e){return e.playerId===a.playerId?Object.assign(Object.assign({},e),{name:a.name}):e}))});case"playerBankerStatusChange":return Object.assign(Object.assign({},e),{players:e.players.map((function(e){return e.playerId===a.playerId?Object.assign(Object.assign({},e),{banker:a.isBanker}):e}))});case"transaction":if("bank"===a.from||"freeParking"===a.from){var t=e.players.find((function(e){return e.playerId===a.to}));if(void 0===t)throw new Error("Unable to find destination player");return Object.assign(Object.assign({},e),{players:[].concat(n(e.players.filter((function(e){return e.playerId!==a.from&&e.playerId!==a.to}))),[Object.assign(Object.assign({},t),{balance:t.balance+a.amount})]),freeParkingBalance:"freeParking"===a.from?e.freeParkingBalance-a.amount:e.freeParkingBalance})}if("bank"===a.to||"freeParking"===a.to){var r=e.players.find((function(e){return e.playerId===a.from}));if(void 0===r)throw new Error("Unable to find source player");return Object.assign(Object.assign({},e),{players:[].concat(n(e.players.filter((function(e){return e.playerId!==a.from&&e.playerId!==a.to}))),[Object.assign(Object.assign({},r),{balance:r.balance-a.amount})]),freeParkingBalance:"freeParking"===a.to?e.freeParkingBalance+a.amount:e.freeParkingBalance})}var l=e.players.find((function(e){return e.playerId===a.from})),o=e.players.find((function(e){return e.playerId===a.to}));if(void 0===l||void 0===o)throw new Error("Unable to find source or destination player");return Object.assign(Object.assign({},e),{players:[].concat(n(e.players.filter((function(e){return e.playerId!==a.from&&e.playerId!==a.to}))),[Object.assign(Object.assign({},l),{balance:l.balance-a.amount}),Object.assign(Object.assign({},o),{balance:o.balance+a.amount})])});case"gameOpenStateChange":return Object.assign(Object.assign({},e),{open:a.open})}}),a)}},129:function(e,a,t){},130:function(e,a,t){},131:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(11),o=t.n(l),c=(t(88),t(17)),i=t(9),s=t(14),u=t(146),m=t(136),p=t(145),d=t(73),f=t(29),y=t.n(f);function g(){return(g=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function h(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var v=r.a.createElement("g",null,r.a.createElement("rect",{fill:"none",height:24,width:24})),b=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("rect",{height:7,width:3,x:4,y:10}),r.a.createElement("rect",{height:7,width:3,x:10.5,y:10}),r.a.createElement("rect",{height:3,width:20,x:2,y:19}),r.a.createElement("rect",{height:7,width:3,x:17,y:10}),r.a.createElement("polygon",{points:"12,1 2,6 2,8 22,8 22,6"}))),E=function(e){var a=e.svgRef,t=e.title,n=h(e,["svgRef","title"]);return r.a.createElement("svg",g({enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",ref:a},n),t?r.a.createElement("title",null,t):null,v,b)},k=r.a.forwardRef((function(e,a){return r.a.createElement(E,g({svgRef:a},e))}));t.p;function O(){return(O=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function j(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var w=r.a.createElement("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"}),I=r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),P=function(e){var a=e.svgRef,t=e.title,n=j(e,["svgRef","title"]);return r.a.createElement("svg",O({viewBox:"0 0 24 24",ref:a},n),t?r.a.createElement("title",null,t):null,w,I)},S=r.a.forwardRef((function(e,a){return r.a.createElement(P,O({svgRef:a},e))}));t.p;function N(){return(N=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function C(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var x=r.a.createElement("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),G=r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),T=function(e){var a=e.svgRef,t=e.title,n=C(e,["svgRef","title"]);return r.a.createElement("svg",N({viewBox:"0 0 24 24",ref:a},n),t?r.a.createElement("title",null,t):null,x,G)},B=r.a.forwardRef((function(e,a){return r.a.createElement(T,N({svgRef:a},e))}));t.p;function M(){return(M=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function z(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var H=r.a.createElement("g",null,r.a.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})),F=function(e){var a=e.svgRef,t=e.title,n=z(e,["svgRef","title"]);return r.a.createElement("svg",M({enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",ref:a},n),t?r.a.createElement("title",null,t):null,H)},R=r.a.forwardRef((function(e,a){return r.a.createElement(F,M({svgRef:a},e))}));t.p;function D(){return(D=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function A(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var J,Y=r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),L=r.a.createElement("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}),V=function(e){var a=e.svgRef,t=e.title,n=A(e,["svgRef","title"]);return r.a.createElement("svg",D({viewBox:"0 0 24 24",fill:"black",width:"48px",height:"48px",ref:a},n),t?r.a.createElement("title",null,t):null,Y,L)},W=r.a.forwardRef((function(e,a){return r.a.createElement(V,D({svgRef:a},e))})),$=(t.p,"https://monopoly-money.nitratine.net"),U={home:"/",join:"/join",newGame:"/new-game",funds:"/funds",bank:"/bank",history:"/history",settings:"/settings",help:"/help"},_=(J={},Object(i.a)(J,U.home,{titlePrefix:"",description:"Monopoly Money helps you manage your finances in a game of monopoly from the browser.",index:!0}),Object(i.a)(J,U.join,{titlePrefix:"Join Game",description:"Join a Monopoly Money game",index:!0}),Object(i.a)(J,U.newGame,{titlePrefix:"New Game",description:"Create a new Monopoly Money game",index:!0}),Object(i.a)(J,U.funds,{titlePrefix:"Manage Funds",index:!1}),Object(i.a)(J,U.bank,{titlePrefix:"Bank",index:!1}),Object(i.a)(J,U.history,{titlePrefix:"History",index:!1}),Object(i.a)(J,U.settings,{titlePrefix:"Settings",index:!1}),Object(i.a)(J,U.help,{titlePrefix:"Help",index:!1}),J),q=(t(100),function(e){var a=e.inGame,t=e.isBanker,n=Object(s.usePath)(),l=[{path:U.funds,active:a,title:"Funds",icon:S},{path:U.history,active:a,title:"History",icon:B},{path:U.bank,active:a&&t,title:"Bank",icon:k},{path:U.settings,active:a&&t,title:"Settings",icon:R},{path:U.help,active:!0,title:"Help",icon:W}],o=function(e){return function(){return Object(s.navigate)(e)}};return r.a.createElement(u.a,{bg:"light",variant:"light",sticky:"top",className:"navigation"},r.a.createElement(m.a,null,r.a.createElement(u.a.Brand,{onClick:o("/"),className:"mr-1"},r.a.createElement("img",{src:y.a,height:"30",className:"d-inline-block align-top",alt:"Monopoly Money Banner Logo",style:{cursor:"pointer"}})),r.a.createElement(p.a,{className:"mr-auto",style:{overflowY:"auto"}},l.filter((function(e){return e.active})).map((function(e){var a=e.icon;return r.a.createElement(p.a.Link,{key:e.path,href:"#",onClick:o(e.path),active:n===e.path,className:"p-0"},r.a.createElement(d.a,{variant:"light",title:e.title,className:"d-flex ml-1 icon-button"},r.a.createElement(a,{style:{height:25,width:25,fill:n===e.path?"black":"rgba(0,0,0,.65)"}}),r.a.createElement("span",{className:"ml-1 d-none d-sm-inline"},e.title)))})))))}),K=t(74),Q=t.n(K),X=function(e){var a=e.route,t=e.children,n=_[a],l="".concat(n.titlePrefix," Monopoly Money");return Q()({title:l,description:n.description,charset:"utf-8",lang:"en",metas:[{name:"robots",content:n.index?"index":"noindex, nofollow"}],links:[{rel:"canonical",href:$+a},{rel:"icon",type:"image/ico",href:"/favicon.ico"},{rel:"apple-touch-icon",type:"image/png",href:"/logo.png"}],openGraph:{title:l,image:$+y.a,site_name:"Monopoly Money"}}),r.a.createElement(r.a.Fragment,null,t)},Z=t(137),ee=t(75),ae=function(e){var a=e.children;return r.a.createElement(m.a,null,r.a.createElement(Z.a,{className:"justify-content-md-center"},r.a.createElement(ee.a,{className:"col-md-10"},a)))},te=t(147),ne=t(138),re=t(58),le=t(34),oe=t(6),ce=t(54),ie=t(76),se=t.n(ie),ue=t(44),me=t.n(ue),pe=t(62),de={api:{root:"https://monopoly-money-server.herokuapp.com"}},fe=function(){var e=Object(pe.a)(me.a.mark((function e(a,t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(de.api.root,"/api/game/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.abrupt("return",n.json());case 7:if(404!==n.status){e.next=11;break}return e.abrupt("return",Promise.resolve("DoesNotExist"));case 11:if(403!==n.status){e.next=15;break}return e.abrupt("return",Promise.resolve("NotOpen"));case 15:throw new Error("Server Error (HTTP".concat(n.status,")"));case 16:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(pe.a)(me.a.mark((function e(a,t,n){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(de.api.root,"/api/game/").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Authorization:t},signal:null===n||void 0===n?void 0:n.signal});case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.abrupt("return",r.json());case 7:if(404!==r.status){e.next=11;break}return e.abrupt("return",Promise.resolve("DoesNotExist"));case 11:if(401!==r.status){e.next=15;break}return e.abrupt("return",Promise.resolve("Unauthorized"));case 15:throw new Error("Server Error (HTTP".concat(r.status,")"));case 16:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),ge={},he=function(e,a){ge[e]=a},ve=function(e){return e in ge?ge[e]:null},be=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=Object(n.useState)((function(){return new AbortController})),t=Object(oe.a)(a,1),r=t[0],l=se()("storedGames",[]),o=Object(oe.a)(l,2),c=o[0],i=o[1],s=Object(n.useState)([]),u=Object(oe.a)(s,2),m=u[0],p=u[1];Object(n.useEffect)((function(){if(e){var a=m.map((function(e){return e.gameId})),t=(null!==c&&void 0!==c?c:[]).filter((function(e){return-1===a.indexOf(e.gameId)})),n=(null!==c&&void 0!==c?c:[]).map((function(e){return e.gameId}));p((function(e){return e.filter((function(e){return-1!==n.indexOf(e.gameId)}))})),p((function(e){return[].concat(Object(re.a)(e),Object(re.a)(t.map((function(e){return Object(le.a)({},e,{status:ve(e.gameId)})}))))})),t.forEach((function(e){ye(e.gameId,e.userToken,r).then((function(a){"DoesNotExist"===a||"Unauthorized"===a?i((null!==c&&void 0!==c?c:[]).filter((function(a){return a.gameId!==e.gameId}))):(he(e.gameId,a),p((function(t){return t.map((function(t){return t.gameId!==e.gameId?t:Object(le.a)({},e,{status:a})}))})))})).catch((function(e){return"DOMException"===(null===e||void 0===e?void 0:e.name)&&console.error(e)}))}))}else p((null!==c&&void 0!==c?c:[]).map((function(e){return Object(le.a)({},e,{status:null})})))}),[c]);var d=function(e,a,t){i([].concat(Object(re.a)((null!==c&&void 0!==c?c:[]).filter((function(a){return a.gameId!==e}))),[{gameId:e,userToken:a,playerId:t,time:ce.DateTime.local().toISO()}]))};return Object(n.useEffect)((function(){return function(){r.abort()}}),[]),{storedGames:m,storeGame:d}},Ee=(t(119),function(e){return"$".concat(e.toLocaleString())}),ke=function(e){var a=e.onGameSetup,t=be().storedGames;return r.a.createElement("div",{className:"home text-center"},r.a.createElement("h1",{className:"sr-only"},"Monopoly Money"),r.a.createElement("img",{src:y.a,className:"banner",alt:"Monopoly Money Banner"}),r.a.createElement("p",{className:"lead mt-2"},"An easy way to manage finances in your game of monopoly from the browser."),r.a.createElement("div",{className:"new-join-button-wrapper mt-4"},r.a.createElement(d.a,{size:"lg",onClick:function(){return Object(s.navigate)("/new-game")}},"New Game"),r.a.createElement(d.a,{size:"lg",onClick:function(){return Object(s.navigate)("/join")}},"Join Game")),r.a.createElement("div",{className:"mt-4"},r.a.createElement("h2",null,"Your Active Games"),t.length>0?r.a.createElement("div",{className:"active-game-cards"},t.sort((function(e,a){return e.time>a.time?-1:1})).map((function(e){var t=e.gameId,n=e.userToken,l=e.playerId,o=e.status,c=e.time;return r.a.createElement(te.a,{key:t,className:"mb-1"},r.a.createElement(te.a.Body,{className:"p-2"},r.a.createElement("div",{className:"text-left"},"Game ",t,r.a.createElement("small",{style:{float:"right"}},ce.DateTime.fromISO(c).toFormat("DD h:mm a"))),r.a.createElement("div",null,null===o||void 0===o?void 0:o.players.sort((function(e,a){return e.playerId===l?-1:0})).map((function(e){return r.a.createElement(ne.a,{key:e.playerId,variant:e.playerId===l?"dark":e.banker?"info":"success",className:"mr-1"},e.name,": ",Ee(e.balance))})),null!==o&&r.a.createElement(ne.a,{variant:"warning"},"Free Parking: ",Ee(o.freeParkingBalance))),r.a.createElement(d.a,{block:!0,size:"sm",variant:"outline-primary",onClick:function(){return a(t,n,l)},className:"mt-2"},"Join Game")))}))):r.a.createElement("div",null,"You have no active games")),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("h2",null,"What is Monopoly Money?"),r.a.createElement("p",null,"Monopoly Money is a webapp that helps you keep track of your finances in a game of Monopoly (or any game that uses currency)."),r.a.createElement("p",null,"Instead of using the cash that the game commonly comes with, you can play Monopoly like you're playing the credit card edition, but with your phone - a much more faster way to exchange money.")))},Oe=(t(120),t(143)),je=t(139),we=t(144),Ie=t(32),Pe=function(e){var a=e.balance,t=e.playerId,l=e.recipient,o=e.proposeTransaction,c=e.onClose,i=Object(n.useState)(""),s=Object(oe.a)(i,2),u=s[0],m=s[1],p=Object(n.useState)(null),f=Object(oe.a)(p,2),y=f[0],g=f[1];return r.a.createElement(Oe.a,{show:!0,onHide:function(){g(null),c()},size:"lg",centered:!0,className:"send-money-modal"},r.a.createElement(Oe.a.Header,{closeButton:!0},r.a.createElement(Oe.a.Title,null,"Transfer Funds to ","freeParking"===l?"Free Parking":"bank"===l?"Bank":l.name)),r.a.createElement(Oe.a.Body,null,r.a.createElement(je.a,null,r.a.createElement(je.a.Prepend,null,r.a.createElement(je.a.Text,null,"Amount")),r.a.createElement(Ie.a,{thousandSeparator:!0,prefix:"$",value:u,onValueChange:function(e){var a=e.value;return m(a)},className:"form-control"}),r.a.createElement(d.a,{variant:"success",className:"remove-left-border-radius",onClick:function(){var e=parseInt(u,10);isNaN(e)?g("Please provide an amount"):e<=0?g("You must provide sum larger than $0"):e>a?g("You do not have enough money (".concat(Ee(a),")")):(o(t,"freeParking"===l||"bank"===l?l:l.playerId,parseInt(u,10)),m(""),g(null),c())}},"Send")),r.a.createElement(we.a.Text,{style:{color:"var(--danger)"}},y)))},Se=t(78),Ne=t(148),Ce=t(140),xe=function(e){var a=e.gameId,t=e.isBanker,l=Object(Se.useClipboard)({copiedTimeout:1e3}),o=Object(n.useRef)();return r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",{ref:o,onClick:function(){l.copy(a)}},a),r.a.createElement(Ne.a,{target:o.current,show:l.copied,placement:"bottom"},(function(e){return r.a.createElement(Ce.a,Object.assign({id:"overlay-example"},e),"Copied to clipboard")})),t&&r.a.createElement("small",{className:"text-muted"},"You can hide this by closing the game in the settings."),r.a.createElement("hr",null))},Ge=function(e){var a,t=e.gameId,l=e.playerId,o=e.isGameOpen,i=e.players,s=e.freeParkingBalance,u=e.proposeTransaction,m=Object(n.useState)(null),p=Object(oe.a)(m,2),f=p[0],y=p[1],g=Object(c.b)((function(){var e;return r.a.createElement(r.a.Fragment,null,null!==f&&r.a.createElement(Pe,{balance:null!==(e=null===E||void 0===E?void 0:E.balance)&&void 0!==e?e:0,playerId:l,recipient:f,proposeTransaction:u,onClose:function(){return y(null)}}))}),[f]),h=Object(oe.a)(g,2),v=h[0],b=h[1];Object(n.useEffect)((function(){null!==f?v():b()}),[f,v,b]);var E=i.find((function(e){return e.playerId===l})),k=null!==(a=null===E||void 0===E?void 0:E.banker)&&void 0!==a&&a;return r.a.createElement("div",{className:"funds"},o&&r.a.createElement(xe,{gameId:t,isBanker:k}),r.a.createElement(te.a,{className:"mb-1 text-center"},void 0!==E&&r.a.createElement(te.a.Body,{className:"p-3"},E.name,": ",Ee(E.balance))),r.a.createElement("div",{className:"balance-grid"},i.filter((function(e){return e.playerId!==l})).sort((function(e,a){return e.name>a.name?1:a.name>e.name?-1:0})).map((function(e){return r.a.createElement(te.a,{key:e.name,className:"text-center"},r.a.createElement(te.a.Body,{className:"p-3"},r.a.createElement("div",null,e.name),r.a.createElement("div",null,Ee(e.balance)),r.a.createElement(d.a,{size:"sm",variant:"outline-dark",className:"mt-2",onClick:function(){return y(e)}},"Send Money")))}))),r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:10}},r.a.createElement(te.a,{className:"mt-1 text-center"},r.a.createElement(te.a.Body,{className:"p-3"},r.a.createElement("div",null,"Free Parking"),r.a.createElement("div",null,Ee(s)),r.a.createElement(d.a,{size:"sm",variant:"outline-dark",className:"mt-2",onClick:function(){return y("freeParking")}},"Send Money"))),r.a.createElement(te.a,{className:"mt-1 text-center"},r.a.createElement(te.a.Body,{className:"p-3"},r.a.createElement("div",null,"Bank"),r.a.createElement(d.a,{size:"sm",variant:"outline-dark",className:"mt-2",onClick:function(){return y("bank")}},"Send Money")))))},Te=t(141),Be=t(57),Me=function(e){var a,t=e.label,l=e.submitText,o=e.players,c=e.onSubmit,i=t.toLowerCase().replace(" ","-"),s=Object(n.useState)(""),u=Object(oe.a)(s,2),m=u[0],p=u[1],f=Object(n.useState)(null),y=Object(oe.a)(f,2),g=y[0],h=y[1],v=Object(n.useState)(null),b=Object(oe.a)(v,2),E=b[0],k=b[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"".concat(i,"-value")},t),r.a.createElement(je.a,null,r.a.createElement(Ie.a,{thousandSeparator:!0,prefix:"$",id:"".concat(i,"-value"),value:m,onValueChange:function(e){var a=e.value;return p(a)},className:"form-control"}),r.a.createElement(Te.a,{variant:"outline-secondary",id:"".concat(i,"-player"),className:"mid-dropdown",title:null!==(a=null===g||void 0===g?void 0:g.name)&&void 0!==a?a:"Select Player"},o.map((function(e){return r.a.createElement(Be.a.Item,{key:e.playerId,onClick:function(){return h(e)}},e.name)}))),r.a.createElement(je.a.Append,null,r.a.createElement(d.a,{variant:"outline-secondary",onClick:function(){var e=parseInt(m,10);isNaN(e)?k("Please provide an amount"):e<=0?k("You must provide sum larger than $0"):null===g?k("No player is selected"):(c(parseInt(m,10),g.playerId),p(""),h(null),k(null))}},l))),r.a.createElement(we.a.Text,{style:{color:"var(--danger)"}},E))},ze=(t(123),function(e){var a,t=e.players,l=e.freeParkingBalance,o=e.onSubmit,c=Object(n.useState)(null),i=Object(oe.a)(c,2),s=i[0],u=i[1],m=null!==s;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"free-parking-player"},"Give Free Parking (",Ee(l),")"),r.a.createElement(je.a,null,r.a.createElement(Te.a,{as:je.a.Prepend,variant:"outline-secondary",id:"free-parking-player",title:null!==(a=null===s||void 0===s?void 0:s.name)&&void 0!==a?a:"Select Player"},t.map((function(e){return r.a.createElement(Be.a.Item,{key:e.playerId,onClick:function(){return u(e)}},e.name)}))),r.a.createElement(je.a.Append,null,r.a.createElement(d.a,{variant:"outline-secondary",onClick:function(){null!==s&&(o(s.playerId),u(null))},disabled:!m},"Give"))))}),He=function(e){var a=e.submitAmount,t=e.onClose,l=Object(n.useState)(""),o=Object(oe.a)(l,2),c=o[0],i=o[1],s=Object(n.useState)(null),u=Object(oe.a)(s,2),m=u[0],p=u[1];return r.a.createElement(Oe.a,{show:!0,onHide:function(){p(null),t()},size:"lg",centered:!0,className:"send-money-modal"},r.a.createElement(Oe.a.Header,{closeButton:!0},r.a.createElement(Oe.a.Title,null,"Initialise Amount")),r.a.createElement(Oe.a.Body,null,r.a.createElement("p",null,"Once you give a player money or initialise balances, you can not initialise balances again."),r.a.createElement(je.a,null,r.a.createElement(je.a.Prepend,null,r.a.createElement(je.a.Text,null,"Amount")),r.a.createElement(Ie.a,{thousandSeparator:!0,prefix:"$",value:c,onValueChange:function(e){var a=e.value;return i(a)},className:"form-control"}),r.a.createElement(d.a,{variant:"success",className:"remove-left-border-radius",onClick:function(){var e=parseInt(c,10);isNaN(e)?p("Please provide an amount"):e<=0?p("You must provide sum larger than $0"):(p(null),a(e))}},"Initialise")),r.a.createElement(we.a.Text,{style:{color:"var(--danger)"}},m)))},Fe=function(e){var a=e.players,t=e.proposeTransaction,n=Object(c.b)((function(){return r.a.createElement(He,{submitAmount:function(e){a.forEach((function(a){t("bank",a.playerId,e)}))},onClose:i})})),l=Object(oe.a)(n,2),o=l[0],i=l[1];return r.a.createElement(d.a,{variant:"primary",block:!0,onClick:o},"Initialise Player Balances")},Re=function(e){var a=e.players,t=e.freeParkingBalance,n=e.hasATransactionBeenMade,l=e.proposeTransaction;return r.a.createElement("div",{className:"bank"},!n&&r.a.createElement("div",{className:"mb-3"},r.a.createElement(Fe,{players:a,proposeTransaction:l})),r.a.createElement("div",{className:"mb-3"},r.a.createElement(Me,{label:"Give Money To Player",submitText:"Send",players:a,onSubmit:function(e,a){return l("bank",a,e)}})),r.a.createElement("div",{className:"mb-3"},r.a.createElement(Me,{label:"Take Money From Player",submitText:"Take",players:a,onSubmit:function(e,a){return l(a,"bank",e)}})),r.a.createElement("div",{className:"mb-3"},r.a.createElement(ze,{players:a,freeParkingBalance:t,onSubmit:function(e){return l("freeParking",e,t)}})))},De=t(25),Ae=(t(129),function(e,a,t){e.type,a.players.find((function(a){return a.playerId===e.actionedBy}));switch(e.type){case"playerJoin":var n=t.players.find((function(a){return a.playerId===e.playerId}));return{id:"".concat(e.type+e.time),title:"Player Join",detail:"".concat(n.name," joined"),colour:"cyan"};case"playerBankerStatusChange":var r=t.players.find((function(a){return a.playerId===e.playerId}));return{id:"".concat(e.type+e.time),title:"Player Banker Status Change",detail:"".concat(r.name," was made a banker"),colour:"yellow"};case"transaction":var l="bank"===e.to?"Bank":"freeParking"===e.to?"Free Parking":t.players.find((function(a){return a.playerId===e.to})).name,o="bank"===e.from?"Bank":"freeParking"===e.from?"Free Parking":t.players.find((function(a){return a.playerId===e.from})).name,c=a.players.find((function(a){return a.playerId===e.actionedBy})),i=c.playerId===e.from?"":"(actioned by ".concat(c.name,")");return{id:"".concat(e.type+e.time),title:"Transaction",detail:"".concat(o," \u2192 ").concat(l," (").concat(Ee(e.amount),") ").concat(i),colour:"green"};case"playerNameChange":var s=a.players.find((function(a){return a.playerId===e.playerId})).name,u=t.players.find((function(a){return a.playerId===e.playerId})).name;return{id:"".concat(e.type+e.time),title:"Player Name Change",detail:"".concat(s," was renamed to ").concat(u),colour:"orange"};case"playerDelete":var m=a.players.find((function(a){return a.playerId===e.playerId})).name;return{id:"".concat(e.type+e.time),title:"Player Removal",detail:"".concat(m," was removed from the game"),colour:"red"};case"gameOpenStateChange":return{id:"".concat(e.type+e.time),title:"Game Open State Change",detail:"The game is now ".concat(e.open?"open":"closed"," to new players"),colour:"blue"}}}),Je=function(e){var a=e.events,t=De.defaultGameState,n=a.map((function(e){var a=Object(De.calculateGameState)([e],t),n=Ae(e,t,a);return t=a,n}));return r.a.createElement("div",{className:"history"},n.reverse().map((function(e){return r.a.createElement("div",{key:e.id,className:"event mb-2"},r.a.createElement("div",{className:"bar",style:{background:"var(--".concat(e.colour,")")}}),r.a.createElement("div",{className:"event-details"},r.a.createElement("div",{className:"title"},r.a.createElement("small",null,e.title)),r.a.createElement("div",{className:"detail"},e.detail)))})))},Ye=t(142),Le=t(77),Ve=function(e){var a=e.player,t=e.proposePlayerNameChange,l=e.onClose,o=Object(n.useState)(a.name),c=Object(oe.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(null),m=Object(oe.a)(u,2),p=m[0],f=m[1];return r.a.createElement(Oe.a,{show:!0,onHide:l,size:"lg",centered:!0},r.a.createElement(Oe.a.Header,{closeButton:!0},r.a.createElement(Oe.a.Title,null,"Change Player Name")),r.a.createElement(Oe.a.Body,null,r.a.createElement(je.a,null,r.a.createElement(je.a.Prepend,null,r.a.createElement(je.a.Text,null,"Name")),r.a.createElement(Le.a,{value:i,onChange:function(e){return s(e.currentTarget.value)}}),r.a.createElement(d.a,{variant:"success",onClick:function(){f(""===i?"Name must not be empty":null),t(a.playerId,i),l()},className:"remove-left-border-radius"},"Rename")),r.a.createElement(we.a.Text,{style:{color:"var(--danger)"}},p)))},We=function(e){var a=e.player,t=e.proposePlayerDelete,n=e.onClose;return r.a.createElement(Oe.a,{show:!0,onHide:n,size:"lg",centered:!0},r.a.createElement(Oe.a.Header,{closeButton:!0},r.a.createElement(Oe.a.Title,null,"Remove Player")),r.a.createElement(Oe.a.Body,null,r.a.createElement("p",null,"Are you sure you want to remove ",a.name,"?")),r.a.createElement(Oe.a.Footer,null,r.a.createElement(d.a,{variant:"danger",onClick:n},"Cancel"),r.a.createElement(d.a,{variant:"success",className:" ml-1",onClick:function(){t(a.playerId),n()}},"Remove")))},$e=function(e){var a=e.proposeGameEnd,t=e.onClose;return r.a.createElement(Oe.a,{show:!0,onHide:t,size:"lg",centered:!0},r.a.createElement(Oe.a.Header,{closeButton:!0},r.a.createElement(Oe.a.Title,null,"End Game")),r.a.createElement(Oe.a.Body,null,r.a.createElement("p",null,"Are you sure you want to end the game?"),r.a.createElement("p",null,"This will kick everyone and you will not be able to re-join the game.")),r.a.createElement(Oe.a.Footer,null,r.a.createElement(d.a,{variant:"danger",onClick:t},"Cancel"),r.a.createElement(d.a,{variant:"success",className:" ml-1",onClick:function(){a(),t()}},"End Game")))},Ue=function(e){var a=e.isGameOpen,t=e.players,l=e.proposePlayerNameChange,o=e.proposePlayerDelete,i=e.proposeGameOpenStateChange,s=e.proposeGameEnd,u=Object(n.useState)(null),m=Object(oe.a)(u,2),p=m[0],f=m[1],y=Object(c.b)((function(){return r.a.createElement(r.a.Fragment,null,null!==p&&r.a.createElement(Ve,{player:p,proposePlayerNameChange:l,onClose:v}))}),[p]),g=Object(oe.a)(y,2),h=g[0],v=g[1],b=Object(c.b)((function(){return r.a.createElement(r.a.Fragment,null,null!==p&&r.a.createElement(We,{player:p,proposePlayerDelete:o,onClose:O}))}),[p]),E=Object(oe.a)(b,2),k=E[0],O=E[1],j=Object(c.b)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{proposeGameEnd:s,onClose:P}))}),[p]),w=Object(oe.a)(j,2),I=w[0],P=w[1];return r.a.createElement("div",null,r.a.createElement(Ye.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Balance"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.playerId},r.a.createElement("td",null,e.name),r.a.createElement("td",null,Ee(e.balance)),r.a.createElement("td",null,r.a.createElement(d.a,{variant:"outline-secondary",size:"sm",title:"Rename",onClick:function(){f(e),h()}},r.a.createElement("span",{role:"img","aria-label":"Rename"},"\u270f\ufe0f")),r.a.createElement(d.a,{variant:"outline-danger",size:"sm",title:"Remove",className:"ml-1",onClick:function(){f(e),k()}},r.a.createElement("span",{role:"img","aria-label":"Remove"},"\ud83d\uddd1\ufe0f"))))})))),r.a.createElement(d.a,{block:!0,variant:"primary",onClick:function(){return i(!a)}},a?"Close":"Open"," Game To New Players"),r.a.createElement(d.a,{block:!0,variant:"danger",onClick:function(){return I()}},"End Game"))},_e=function(e){var a=e.newGame,t=e.onGameSetup,l=a?"Create Game":"Join Game";Object(s.useTitle)("".concat(l," - Monopoly Money"));var o=be(!1).storedGames,c=Object(n.useState)(!1),i=Object(oe.a)(c,2),u=i[0],m=i[1],p=Object(n.useState)(""),f=Object(oe.a)(p,2),y=f[0],g=f[1],h=Object(n.useState)(""),v=Object(oe.a)(h,2),b=v[0],E=v[1],k=Object(n.useState)(null),O=Object(oe.a)(k,2),j=O[0],w=O[1],I=Object(n.useState)(null),P=Object(oe.a)(I,2),S=P[0],N=P[1],C=-1!==o.map((function(e){return e.gameId})).indexOf(y),x=function(){if(C){var e=o.find((function(e){return e.gameId===y}));t(e.gameId,e.userToken,e.playerId)}else if(a){if(""===b)return void N("Please provide your name");N(null),m(!0),function(e){return fetch("".concat(de.api.root,"/api/game"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){if(200===e.status)return e.json();throw new Error("Server Error (HTTP".concat(e.status,")"))}))}(b).then((function(e){t(e.gameId,e.userToken,e.playerId)})).catch((function(e){return console.log(e)})).finally((function(){return m(!1)}))}else{if(""===y)return void w("Please provide the game Id");if(w(null),""===b)return void N("Please provide your name");N(null),m(!0),fe(y,b).then((function(e){"DoesNotExist"===e?w("That game does not exist"):"NotOpen"===e?w("That game is not open. Ask the banker to open the game."):t(e.gameId,e.userToken,e.playerId)})).catch((function(e){return console.log(e)})).finally((function(){return m(!1)}))}};return r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,l),!a&&r.a.createElement(we.a.Group,null,r.a.createElement(we.a.Label,null,"Game Id"),r.a.createElement(we.a.Control,{placeholder:"123456",value:y,className:"text-center",onChange:function(e){var a;g(null!==(a=e.currentTarget.value)&&void 0!==a?a:"")}}),r.a.createElement(we.a.Text,{style:{color:"var(--danger)"}},j)),C?r.a.createElement("p",null,r.a.createElement("em",null,"You're already in this game - name is not required.")):r.a.createElement(we.a.Group,null,r.a.createElement(we.a.Label,null,"Your Name"),r.a.createElement(we.a.Control,{placeholder:"Name",value:b,className:"text-center",onChange:function(e){E(e.currentTarget.value)},onKeyDown:function(e){return"Enter"===e.key&&x()}}),r.a.createElement(we.a.Text,{style:{color:"var(--danger)"}},S)),r.a.createElement(d.a,{block:!0,variant:"primary",onClick:x,disabled:u},a?"Create":"Join"))},qe=t(80),Ke=t.n(qe),Qe=(t(130),function(){return r.a.createElement("div",{className:"help"},r.a.createElement("h3",{className:"text-center"},"Monopoly Money Help"),r.a.createElement("p",{className:"lead mt-2 text-center"},"A small gide to Monopoly Money."),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"#pages"},"Pages")),r.a.createElement("li",null,r.a.createElement("a",{href:"#player-help"},"Player Help")),r.a.createElement("li",null,r.a.createElement("a",{href:"#banker-help"},"Banker Help"))),r.a.createElement("h4",{id:"pages"},"Pages"),r.a.createElement("img",{src:Ke.a,alt:"Titles for each page",className:"mw-100"}),r.a.createElement("h4",{id:"player-help"},"Player Help"),r.a.createElement("h5",null,"Joining a Game"),r.a.createElement("p",null,'To join a game, select "Join Game" from the home page and then enter the game id (the banker will have this) and your name. Press "Join" when you have filled out all the fields.'),r.a.createElement("h5",null,"Transferring Funds to Other Players, Free Parking and the Bank"),r.a.createElement("p",null,'To transfer funds to another person/entity, select "Send Money" under their tile on the funds page. Enter the amount you want to send and then press "Send" to complete the transaction.'),r.a.createElement("h5",null,"Viewing Previous Transactions"),r.a.createElement("p",null,"Monopoly money allows you to view all events including transactions that have previously ocurred in the game. Go to the history page to view these events."),r.a.createElement("h4",{id:"banker-help"},"Banker Help"),r.a.createElement("h5",null,"Creating a Game"),r.a.createElement("p",null,'To create a game, select "New Game" from the home page, enter your name (this will be your player name) and press "Create".'),r.a.createElement("h5",null,"Initialising Player Balances"),r.a.createElement("p",null,"Initialising a game sets everyone's balance to an initial value in one action; this option is only available if no transaction has been made yet."),r.a.createElement("p",null,'Clicking the "Initialise Player Balances" button on the banker page, providing and amount and pressing "Initialise" will set all players balances to the provided value.'," "),r.a.createElement("h5",null,"Giving Money to Players from the Bank"),r.a.createElement("p",null,'On the bank page under the "Give Money To Player" label is a form to give money to players. Provide the amount and then select a target player from the dropdown. Pressing send will complete the transaction.'),r.a.createElement("h5",null,"Moving Money from Players from the Bank"),r.a.createElement("p",null,'You can also do the opposite of above using the form under "Take Money From Player"; move money from a player to the bank.'),r.a.createElement("p",null,"This is typically not a required action but is provided in the case that the banker accidentally gives too much money to a player."),r.a.createElement("h5",null,"Giving Free Parking to a Player"),r.a.createElement("p",null,'To give free parking to a player, select the player in the dropdown under the "Give Free Parking" label and press "Give" to complete the transaction.'),r.a.createElement("h5",null,"Changing a Player's Name"),r.a.createElement("p",null,'You can change a players name on the settings page by clicking the pencil button in the same row as they target player. Modifying the name and clicking "Rename" will rename the player.'),r.a.createElement("h5",null,"Removing a Player"),r.a.createElement("p",null,"You can remove a player from the game the settings page by clicking the trash button in the same row as they target player. Confirming this action will remove the player."),r.a.createElement("p",null),r.a.createElement("h5",null,"Closing the Game to New Players"),r.a.createElement("p",null,'Closing the game stops new players from joining and hides the game code from the funds page. To do this, select "Close Game To New Players" on the settings page. This is helpful if everyone has joined the game and you don\'t need anyone else to join.'),r.a.createElement("p",null,"To re-open the game, press the same button again."),r.a.createElement("h5",null,"Ending the Game"),r.a.createElement("p",null,'You can end the game by clicking "End Game" on the setting page and confirming. This will fully delete the game and kick everyone. You cannot go back into a game after ending it.'))}),Xe=t(81),Ze=t(82),ea=function(){function e(a,t,n,r,l){var o=this;Object(Xe.a)(this,e),this.gameId=void 0,this.userToken=void 0,this.playerId=void 0,this.onGameStateChange=void 0,this.onDisplayMessage=void 0,this.events=[],this.webSocket=void 0,this.gameState=De.defaultGameState,this.gameEnd=function(e){switch(o.webSocket.close(),e){case"end":o.onDisplayMessage("Game Ended","The game has been ended by the banker.",o.gameState);break;case"removed":var a=Object(De.calculateGameState)(o.events.slice(0,-1),De.defaultGameState);o.onDisplayMessage("Removed From Game","You have been intentionally removed from the game by the banker.",a);break;case"unexpectedWebSocketClosure":o.onDisplayMessage("Disconnection from the server","Unexpectedly disconnection from the server. Please make sure you are connected to the internet",o.gameState)}},this.gameId=a,this.userToken=t,this.playerId=n,this.onGameStateChange=r,this.onDisplayMessage=l;var c=de.api.root.replace(/http?/g,"ws");this.webSocket=new WebSocket("".concat(c,"/api/events")),this.webSocket.onmessage=this.onWebSocketMessage.bind(this),this.webSocket.addEventListener("open",(function(e){var a={type:"auth",gameId:o.gameId,userToken:o.userToken};o.webSocket.send(JSON.stringify(a))})),this.webSocket.addEventListener("close",(function(e){e.wasClean||(o.gameEnd("unexpectedWebSocketClosure"),o.onGameStateChange(!0))}))}return Object(Ze.a)(e,[{key:"getState",value:function(){return this.gameState}},{key:"getEvents",value:function(){return this.events}},{key:"amIABanker",value:function(){var e,a=this,t=this.gameState.players.find((function(e){return e.playerId===a.playerId}));return null!==(e=null===t||void 0===t?void 0:t.banker)&&void 0!==e&&e}},{key:"proposeTransaction",value:function(e,a,t){var n={time:"",actionedBy:"",type:"transaction",from:e,to:a,amount:t};this.submitEvent(n)}},{key:"proposePlayerNameChange",value:function(e,a){var t={time:"",actionedBy:"",type:"playerNameChange",playerId:e,name:a};this.submitEvent(t)}},{key:"proposePlayerDelete",value:function(e){var a={time:"",actionedBy:"",type:"playerDelete",playerId:e};this.submitEvent(a)}},{key:"proposeGameOpenStateChange",value:function(e){var a={time:"",actionedBy:"",type:"gameOpenStateChange",open:e};this.submitEvent(a)}},{key:"proposeGameEnd",value:function(){this.webSocket.send(JSON.stringify({type:"proposeEndGame"}))}},{key:"onWebSocketMessage",value:function(e){var a=JSON.parse(e.data);"initialEventArray"===a.type?(this.events=a.events,this.gameState=Object(De.calculateGameState)(this.events,this.gameState)):"newEvent"===a.type?(this.events.push(a.event),this.gameState=Object(De.calculateGameState)([a.event],this.gameState)):"gameEnd"===a.type&&this.gameEnd("end");var t=-1!==this.gameState.players.map((function(e){return e.playerId})).indexOf(this.playerId);t||this.gameEnd("removed");var n="gameEnd"===a.type||!t;this.onGameStateChange(n)}},{key:"submitEvent",value:function(e){var a={type:"proposeEvent",event:e};this.webSocket.send(JSON.stringify(a))}}]),e}(),aa=function(e){var a=e.title,t=e.body,n=e.onClose;return r.a.createElement(Oe.a,{show:!0,onHide:n,size:"lg",centered:!0,className:"send-money-modal"},r.a.createElement(Oe.a.Header,{closeButton:!0},r.a.createElement(Oe.a.Title,null," ",a," ")),r.a.createElement(Oe.a.Body,null,t),r.a.createElement(Oe.a.Footer,null,r.a.createElement(d.a,{variant:"primary",onClick:n},"Ok")))},ta=function(){var e=Object(n.useState)(null),a=Object(oe.a)(e,2),t=a[0],l=a[1],o=Object(c.b)((function(){return r.a.createElement(r.a.Fragment,null,null!==t&&r.a.createElement(aa,Object.assign({},t,{onClose:u})))}),[t]),i=Object(oe.a)(o,2),s=i[0],u=i[1];return function(e){l(e),s()}},na=function(){var e=function(){var e=Object(n.useState)(),a=Object(oe.a)(e,2)[1];return Object(n.useCallback)((function(){return a({})}),[])}(),a=Object(n.useState)(null),t=Object(oe.a)(a,2),l=t[0],o=t[1],c=ta(),i=function(e,a,t){c({title:e,body:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,a),r.a.createElement("p",{className:"mb-0"},"Here was the games progress:"),r.a.createElement("ul",{className:"mb-1"},t.players.map((function(e){return r.a.createElement("li",{key:e.playerId},e.name,": ",Ee(e.balance))})),r.a.createElement("li",null,"Free Parking: ",Ee(t.freeParkingBalance))),r.a.createElement("small",null,"(Provided just in the case you need to re-create the game)"))})};return{initialize:function(a){var t=a.gameId,n=a.userToken,r=a.playerId;o(new ea(t,n,r,(function(a){a?o(null):e()}),i))},clear:function(){null!==l&&l.gameEnd(null),o(null)},authInfo:null===l?null:{gameId:l.gameId,userToken:l.userToken,playerId:l.playerId},game:null===l?null:Object(le.a)({},l.getState(),{gameId:l.gameId,playerId:l.playerId,isBanker:l.amIABanker(),events:l.getEvents(),actions:{proposeTransaction:l.proposeTransaction.bind(l),proposePlayerNameChange:l.proposePlayerNameChange.bind(l),proposePlayerDelete:l.proposePlayerDelete.bind(l),proposeGameOpenStateChange:l.proposeGameOpenStateChange.bind(l),proposeGameEnd:l.proposeGameEnd.bind(l)}})}},ra=function(e,a){return r.a.createElement(X,{route:e},r.a.createElement(ae,null,a))},la=function(){var e,a,t=be(!1).storeGame,l=na(),o=l.game,c=l.authInfo,u=l.initialize,m=l.clear,p=Object(s.usePath)();Object(n.useEffect)((function(){p!==U.home&&p!==U.join&&p!==U.newGame||f()}),[p]),Object(n.useEffect)((function(){-1===Object.values(U).indexOf(p)&&Object(s.navigate)("/")}),[p]),Object(n.useEffect)((function(){null===o&&Object(s.navigate)("/")}),[o]);var d=function(e,a,n){null!==c&&t(c.gameId,c.userToken,c.playerId),u({gameId:e,userToken:a,playerId:n}),t(e,a,n),Object(s.navigate)("/funds")},f=function(){null!==c&&t(c.gameId,c.userToken,c.playerId),m()},y=function(){return r.a.createElement(ke,{onGameSetup:d})},g=(e={},Object(i.a)(e,U.home,(function(){return ra(U.home,r.a.createElement(ke,{onGameSetup:d}))})),Object(i.a)(e,U.join,(function(){return ra(U.join,r.a.createElement(_e,{newGame:!1,onGameSetup:d}))})),Object(i.a)(e,U.newGame,(function(){return ra(U.newGame,r.a.createElement(_e,{newGame:!0,onGameSetup:d}))})),Object(i.a)(e,U.funds,null!==o?function(){return ra(U.funds,r.a.createElement(Ge,{gameId:o.gameId,playerId:o.playerId,isGameOpen:o.open,players:o.players,freeParkingBalance:o.freeParkingBalance,proposeTransaction:o.actions.proposeTransaction}))}:function(){return r.a.createElement(y,null)}),Object(i.a)(e,U.bank,null!==o&&o.isBanker?function(){return ra(U.bank,r.a.createElement(Re,{players:o.players,freeParkingBalance:o.freeParkingBalance,hasATransactionBeenMade:o.events.filter((function(e){return"transaction"===e.type})).length>0,proposeTransaction:o.actions.proposeTransaction}))}:function(){return r.a.createElement(y,null)}),Object(i.a)(e,U.history,null!==o?function(){return ra(U.history,r.a.createElement(Je,{events:o.events}))}:function(){return r.a.createElement(y,null)}),Object(i.a)(e,U.settings,null!==o&&o.isBanker?function(){return ra(U.settings,r.a.createElement(Ue,{isGameOpen:o.open,players:o.players,proposePlayerNameChange:o.actions.proposePlayerNameChange,proposePlayerDelete:o.actions.proposePlayerDelete,proposeGameOpenStateChange:o.actions.proposeGameOpenStateChange,proposeGameEnd:o.actions.proposeGameEnd}))}:function(){return r.a.createElement(y,null)}),Object(i.a)(e,U.help,(function(){return ra(U.help,r.a.createElement(Qe,null))})),e),h=Object(s.useRoutes)(g);return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{inGame:null!==o,isBanker:null!==(a=null===o||void 0===o?void 0:o.isBanker)&&void 0!==a&&a}),r.a.createElement("div",{className:"my-3"},h||r.a.createElement(y,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,null,r.a.createElement(la,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},25:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t(124);a.defaultGameState=n.defaultGameState,a.calculateGameState=n.calculateGameState},29:function(e,a,t){e.exports=t.p+"static/media/banner.6db68e8e.png"},80:function(e,a,t){e.exports=t.p+"static/media/pages.32d992be.png"},83:function(e,a,t){e.exports=t(131)},88:function(e,a,t){}},[[83,1,2]]]);