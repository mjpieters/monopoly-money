(this.webpackJsonpclient2=this.webpackJsonpclient2||[]).push([[0],{109:function(e,t,n){},128:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){"use strict";var a=n(135);Object.defineProperty(t,"__esModule",{value:!0}),t.calculateGameState=t.defaultGameState=void 0,t.defaultGameState={players:[],freeParkingBalance:0,open:!0},t.calculateGameState=function(e,t){return e.reduce((function(e,t){switch(t.type){case"playerJoin":return Object.assign(Object.assign({},e),{players:[].concat(a(e.players),[{playerId:t.playerId,name:t.name,banker:!1,balance:0,connected:!1}])});case"playerDelete":return Object.assign(Object.assign({},e),{players:e.players.filter((function(e){return e.playerId!==t.playerId}))});case"playerNameChange":return Object.assign(Object.assign({},e),{players:e.players.map((function(e){return e.playerId===t.playerId?Object.assign(Object.assign({},e),{name:t.name}):e}))});case"playerBankerStatusChange":return Object.assign(Object.assign({},e),{players:e.players.map((function(e){return e.playerId===t.playerId?Object.assign(Object.assign({},e),{banker:t.isBanker}):e}))});case"transaction":if("bank"===t.from||"freeParking"===t.from){var n=e.players.find((function(e){return e.playerId===t.to}));if(void 0===n)throw new Error("Unable to find destination player");return Object.assign(Object.assign({},e),{players:[].concat(a(e.players.filter((function(e){return e.playerId!==t.from&&e.playerId!==t.to}))),[Object.assign(Object.assign({},n),{balance:n.balance+t.amount})]),freeParkingBalance:"freeParking"===t.from?e.freeParkingBalance-t.amount:e.freeParkingBalance})}if("bank"===t.to||"freeParking"===t.to){var r=e.players.find((function(e){return e.playerId===t.from}));if(void 0===r)throw new Error("Unable to find source player");return Object.assign(Object.assign({},e),{players:[].concat(a(e.players.filter((function(e){return e.playerId!==t.from&&e.playerId!==t.to}))),[Object.assign(Object.assign({},r),{balance:r.balance-t.amount})]),freeParkingBalance:"freeParking"===t.to?e.freeParkingBalance+t.amount:e.freeParkingBalance})}var c=e.players.find((function(e){return e.playerId===t.from})),i=e.players.find((function(e){return e.playerId===t.to}));if(void 0===c||void 0===i)throw new Error("Unable to find source or destination player");return Object.assign(Object.assign({},e),{players:[].concat(a(e.players.filter((function(e){return e.playerId!==t.from&&e.playerId!==t.to}))),[Object.assign(Object.assign({},c),{balance:c.balance-t.amount}),Object.assign(Object.assign({},i),{balance:i.balance+t.amount})])});case"gameOpenStateChange":return Object.assign(Object.assign({},e),{open:t.open});case"playerConnectionChange":return Object.assign(Object.assign({},e),{players:[].concat(a(e.players.filter((function(e){return e.playerId!==t.playerId}))),[Object.assign(Object.assign({},e.players.find((function(e){return e.playerId===t.playerId}))),{connected:t.connected})])})}}),t)}},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n(16),i=n.n(c),l=n(17),o=n(13),s=n(20),u=n(159),d=n(148),j=n(158),b=n(85),m=n.p+"static/media/banner.8cd808a3.png";function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var f=r.createElement("g",null,r.createElement("rect",{fill:"none",height:24,width:24})),O=r.createElement("g",null,r.createElement("g",null,r.createElement("rect",{height:7,width:3,x:4,y:10}),r.createElement("rect",{height:7,width:3,x:10.5,y:10}),r.createElement("rect",{height:3,width:20,x:2,y:19}),r.createElement("rect",{height:7,width:3,x:17,y:10}),r.createElement("polygon",{points:"12,1 2,6 2,8 22,8 22,6"})));function y(e,t){var n=e.title,a=e.titleId,c=h(e,["title","titleId"]);return r.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,f,O)}var g=r.forwardRef(y);n.p;function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var k=r.createElement("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"}),w=r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"});function I(e,t){var n=e.title,a=e.titleId,c=x(e,["title","titleId"]);return r.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,k,w)}var P=r.forwardRef(I);n.p;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var C=r.createElement("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),G=r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"});function T(e,t){var n=e.title,a=e.titleId,c=N(e,["title","titleId"]);return r.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,C,G)}var E=r.forwardRef(T);n.p;function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var F=r.createElement("g",null,r.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"}),r.createElement("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"}));function H(e,t){var n=e.title,a=e.titleId,c=M(e,["title","titleId"]);return r.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,F)}var z=r.forwardRef(H);n.p;function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var R=r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),J=r.createElement("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"});function Y(e,t){var n=e.title,a=e.titleId,c=A(e,["title","titleId"]);return r.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"black",width:"48px",height:"48px",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,R,J)}var L,_=r.forwardRef(Y),V=(n.p,"https://monopoly-money.nitratine.net"),U="\ud83c\udfe6 Bank",W="\ud83d\ude97 Free Parking",$={home:"/",join:"/join",newGame:"/new-game",funds:"/funds",bank:"/bank",history:"/history",settings:"/settings",help:"/help"},q=(L={},Object(o.a)(L,$.home,{titlePrefix:"",description:"Monopoly Money helps you manage your finances in a game of monopoly from the browser.",index:!0}),Object(o.a)(L,$.join,{titlePrefix:"Join Game",description:"Join a Monopoly Money game",index:!0}),Object(o.a)(L,$.newGame,{titlePrefix:"New Game",description:"Create a new Monopoly Money game",index:!0}),Object(o.a)(L,$.funds,{titlePrefix:"Manage Funds",index:!1}),Object(o.a)(L,$.bank,{titlePrefix:"Bank",index:!1}),Object(o.a)(L,$.history,{titlePrefix:"History",index:!1}),Object(o.a)(L,$.settings,{titlePrefix:"Settings",index:!1}),Object(o.a)(L,$.help,{titlePrefix:"Help",index:!1}),L),K=(n(109),function(e){var t=e.inGame,n=e.isBanker,r=Object(s.usePath)(),c=[{path:$.funds,active:t,title:"Funds",icon:P},{path:$.history,active:t,title:"History",icon:E},{path:$.bank,active:t&&n,title:"Bank",icon:g},{path:$.settings,active:t&&n,title:"Settings",icon:z},{path:$.help,active:!0,title:"Help",icon:_}],i=function(e){return function(){return Object(s.navigate)(e)}};return Object(a.jsx)(u.a,{bg:"light",variant:"light",sticky:"top",className:"navigation",children:Object(a.jsxs)(d.a,{children:[Object(a.jsx)(u.a.Brand,{onClick:i("/"),className:"mr-1",children:Object(a.jsx)("img",{src:m,height:"30",className:"d-inline-block align-top",alt:"Monopoly Money Banner Logo",style:{cursor:"pointer"}})}),Object(a.jsx)(j.a,{className:"mr-auto",style:{overflowY:"auto"},children:c.filter((function(e){return e.active})).map((function(e){var t=e.icon;return Object(a.jsx)(j.a.Link,{href:"#",onClick:i(e.path),active:r===e.path,className:"p-0",children:Object(a.jsxs)(b.a,{variant:"light",title:e.title,className:"d-flex ml-1 icon-button",children:[Object(a.jsx)(t,{style:{height:25,width:25,fill:r===e.path?"black":"rgba(0,0,0,.65)"}}),Object(a.jsx)("span",{className:"ml-1 d-none d-sm-inline",children:e.title})]})},e.path)}))})]})})}),Q=n(86),X=n.n(Q),Z=function(e){var t=e.route,n=e.children,r=q[t],c=""!==r.titlePrefix?"".concat(r.titlePrefix," - Monopoly Money"):"Monopoly Money";return X()({title:c,description:r.description,charset:"utf-8",lang:"en",metas:[{name:"robots",content:r.index?"index":"noindex, nofollow"}],links:[{rel:"canonical",href:V+t},{rel:"icon",type:"image/ico",href:"/favicon.ico"},{rel:"apple-touch-icon",type:"image/png",href:"/logo.png"}],openGraph:{title:c,image:V+m,site_name:"Monopoly Money"}}),Object(a.jsx)(a.Fragment,{children:n})},ee=n(149),te=n(87),ne=function(e){var t=e.children;return Object(a.jsx)(d.a,{children:Object(a.jsx)(ee.a,{className:"justify-content-md-center",children:Object(a.jsx)(te.a,{className:"col-md-10",children:t})})})},ae=n(160),re=n(150),ce=n(42),ie=n(9),le=n(8),oe=n(29),se=n(59),ue=n.n(se),de=n(51),je=n.n(de),be=n(76),me={api:{root:"https://monopoly-money-server.herokuapp.com"},googleAnalyticsTrackingId:"UA-117153268-5"},pe=function(){var e=Object(be.a)(je.a.mark((function e(t,n){var a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(me.api.root,"/api/game/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n})});case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.json());case 7:if(404!==a.status){e.next=11;break}return e.abrupt("return",Promise.resolve("DoesNotExist"));case 11:if(403!==a.status){e.next=15;break}return e.abrupt("return",Promise.resolve("NotOpen"));case 15:throw new Error("Server Error (HTTP".concat(a.status,")"));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(be.a)(je.a.mark((function e(t,n,a){var r;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(me.api.root,"/api/game/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:n},signal:null===a||void 0===a?void 0:a.signal});case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.abrupt("return",r.json());case 7:if(404!==r.status){e.next=11;break}return e.abrupt("return",Promise.resolve("DoesNotExist"));case 11:if(401!==r.status){e.next=15;break}return e.abrupt("return",Promise.resolve("Unauthorized"));case 15:throw new Error("Server Error (HTTP".concat(r.status,")"));case 16:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),fe="storedGames",Oe={},ye=function(e,t){Oe[e]=t},ge=function(e){return e in Oe?Oe[e]:null},ve=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(r.useState)((function(){return new AbortController})),n=Object(le.a)(t,1),a=n[0],c=ue()(fe,[]),i=Object(le.a)(c,2),l=i[0],o=i[1],s=Object(r.useState)([]),u=Object(le.a)(s,2),d=u[0],j=u[1];Object(r.useEffect)((function(){if(e){var t=d.map((function(e){return e.gameId})),n=(null!==l&&void 0!==l?l:[]).filter((function(e){return-1===t.indexOf(e.gameId)})),r=(null!==l&&void 0!==l?l:[]).map((function(e){return e.gameId}));j((function(e){return e.filter((function(e){return-1!==r.indexOf(e.gameId)}))})),j((function(e){return[].concat(Object(ce.a)(e),Object(ce.a)(n.map((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{status:ge(e.gameId)})}))))})),n.forEach((function(e){he(e.gameId,e.userToken,a).then((function(t){"DoesNotExist"===t||"Unauthorized"===t?o((null!==l&&void 0!==l?l:[]).filter((function(t){return t.gameId!==e.gameId}))):(ye(e.gameId,t),j((function(n){return n.map((function(n){return n.gameId!==e.gameId?n:Object(ie.a)(Object(ie.a)({},e),{},{status:t})}))})))})).catch((function(e){return"DOMException"===(null===e||void 0===e?void 0:e.name)&&console.error(e)}))}))}else j((null!==l&&void 0!==l?l:[]).map((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{status:null})})))}),[l]);var b=function(e,t,n){o([].concat(Object(ce.a)((null!==l&&void 0!==l?l:[]).filter((function(t){return t.gameId!==e}))),[{gameId:e,userToken:t,playerId:n,time:oe.DateTime.local().toISO()}]))};return Object(r.useEffect)((function(){return function(){a.abort()}}),[]),{storedGames:d,storeGame:b}},xe=(n(128),function(e){return"$".concat(e.toLocaleString())}),ke=function(e){return e.slice().sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0}))},we=function(){return window},Ie=n.p+"static/media/screenshot-1.e1dcb53b.png",Pe=n.p+"static/media/screenshot-2.fec870d9.png",Se=n.p+"static/media/screenshot-3.ba9fcae7.png",Ne=n.p+"static/media/screenshot-4.e609185b.png",Ce=function(e){var t=e.onGameSetup,n=ve().storedGames;return Object(a.jsxs)("div",{className:"home text-center",children:[Object(a.jsx)("h1",{className:"sr-only",children:"Monopoly Money"}),Object(a.jsx)("img",{src:m,className:"banner",alt:"Monopoly Money Banner"}),Object(a.jsx)("p",{className:"lead mt-2",children:"An easy way to manage finances in your game of monopoly from the browser."}),Object(a.jsxs)("div",{className:"new-join-button-wrapper mt-4",children:[Object(a.jsx)(b.a,{size:"lg",onClick:function(){return Object(s.navigate)("/new-game")},children:"New Game"}),Object(a.jsx)(b.a,{size:"lg",onClick:function(){return Object(s.navigate)("/join")},children:"Join Game"})]}),Object(a.jsxs)("div",{className:"mt-4",children:[Object(a.jsx)("h2",{children:"Your Active Games"}),n.length>0?Object(a.jsx)("div",{className:"active-game-cards",children:n.sort((function(e,t){return e.time>t.time?-1:1})).map((function(e){var n=e.gameId,r=e.userToken,c=e.playerId,i=e.status,l=e.time;return Object(a.jsx)(ae.a,{className:"mb-1",children:Object(a.jsxs)(ae.a.Body,{className:"p-2",children:[Object(a.jsxs)("div",{className:"text-left",children:["Game ",n,Object(a.jsx)("small",{style:{float:"right"},children:oe.DateTime.fromISO(l).toFormat("DD h:mm a")})]}),Object(a.jsxs)("div",{children:[null===i||void 0===i?void 0:i.players.sort((function(e,t){return e.playerId===c?-1:0})).map((function(e){return Object(a.jsxs)(re.a,{variant:e.playerId===c?"dark":e.banker?"info":"success",className:"mr-1",children:[e.name,": ",xe(e.balance)]},e.playerId)})),null!==i&&Object(a.jsxs)(re.a,{variant:"warning",children:["Free Parking: ",xe(i.freeParkingBalance)]})]}),Object(a.jsx)(b.a,{block:!0,size:"sm",variant:"outline-primary",onClick:function(){return t(n,r,c)},className:"mt-2",children:"Join Game"})]})},n)}))}):Object(a.jsx)("div",{children:"You have no active games"})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"What is Monopoly Money?"}),Object(a.jsx)("p",{children:"Monopoly Money is a webapp that helps you keep track of your finances in a game of Monopoly (or any game that uses currency)."}),Object(a.jsx)("p",{children:"Instead of using the cash that the game commonly comes with, you can play Monopoly like you're playing the credit card edition, but with your phone - a much more faster way to exchange money."}),Object(a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gridGap:6},className:"mt-5",children:[Object(a.jsx)("img",{src:Ie,alt:"Funds page with game id",className:"w-100"}),Object(a.jsx)("img",{src:Pe,alt:"Transfering funds",className:"w-100"}),Object(a.jsx)("img",{src:Se,alt:"Game history",className:"w-100"}),Object(a.jsx)("img",{src:Ne,alt:"Bankers actions page",className:"w-100"})]})]})]})},Ge=n(156),Te=n(157),Ee=n(151),Be=n(37),Me=function(e){var t=e.amount,n=e.setAmount,c=e.id,i=Object(r.useState)(""),l=Object(le.a)(i,2),o=l[0],s=l[1],u=Object(r.useRef)(null);Object(r.useEffect)((function(){s(0===t||null===t?"":"".concat(t))}),[t]),Object(r.useEffect)((function(){n(""===o?null:parseFloat(o))}),[o]);var d=function(e){var t=parseFloat(o);isNaN(t)||s("".concat(e*t)),setTimeout((function(){null!==u.current&&(u.current.focus(),u.current.setSelectionRange(-1,-1))}),50)};return Object(a.jsxs)(Ee.a,{style:{display:"grid",gridTemplateColumns:"2fr 7fr 2fr"},children:[Object(a.jsx)(Ee.a.Prepend,{children:Object(a.jsx)(b.a,{block:!0,variant:"warning",onClick:function(){return d(1e6)},children:"M"})}),Object(a.jsx)(Be.a,{allowNegative:!1,thousandSeparator:!0,prefix:"$",id:c,value:o,onValueChange:function(e){var t=e.value;return s(t)},className:"form-control text-center w-100",autoComplete:"off",getInputRef:u,inputMode:"decimal"}),Object(a.jsx)(Ee.a.Append,{children:Object(a.jsx)(b.a,{block:!0,variant:"primary",onClick:function(){return d(1e3)},children:"K"})})]})},Fe=function(e){var t=e.balance,n=e.playerId,c=e.recipient,i=e.proposeTransaction,l=e.onClose,o=Object(r.useState)(null),s=Object(le.a)(o,2),u=s[0],d=s[1],j=Object(r.useState)(null),m=Object(le.a)(j,2),p=m[0],h=m[1],f=function(){d(null),h(null),l()};return Object(a.jsxs)(Ge.a,{show:!0,onHide:f,size:"lg",centered:!0,className:"send-money-modal",children:[Object(a.jsx)(Ge.a.Header,{closeButton:!0,children:Object(a.jsx)(Ge.a.Title,{children:"Transfer Funds"})}),Object(a.jsxs)(Ge.a.Body,{children:[Object(a.jsxs)("p",{className:"text-center",children:["\ud83d\udcb5 \u2192 ","freeParking"===c?W:"bank"===c?U:c.name]}),Object(a.jsx)(Me,{amount:u,setAmount:d}),Object(a.jsx)(b.a,{block:!0,variant:"success",className:"mt-1",onClick:function(){null===u?h("Please provide an amount"):u<=0?h("You must provide sum larger than $0"):Number.isInteger(u)?u>t?h("You do not have enough money (".concat(xe(t),")")):(i(n,"freeParking"===c||"bank"===c?c:c.playerId,u),f()):h("The amount must be a whole number")},children:"Send"}),Object(a.jsx)(Te.a.Text,{style:{color:"var(--danger)"},children:p})]})]})},He=n(89),ze=n(161),De=n(152),Ae=function(e){var t=e.gameId,n=e.isBanker,c=Object(He.useClipboard)({copiedTimeout:1e3}),i=Object(r.useRef)(null);return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("h1",{ref:i,onClick:function(){c.copy(t)},children:t}),Object(a.jsx)(ze.a,{target:i.current,show:c.copied,placement:"bottom",children:function(e){return Object(a.jsx)(De.a,Object(ie.a)(Object(ie.a)({id:"overlay-example"},e),{},{children:"Copied to clipboard"}))}}),n&&Object(a.jsx)("small",{className:"text-muted",children:"You can hide this by closing the game in the settings."}),Object(a.jsx)("hr",{})]})},Re=(n(131),function(e){var t=e.connected,n=e.className,r=void 0===n?"":n;return Object(a.jsx)("div",{className:"connected-state-dot ".concat(t?"connected":""," ").concat(r)})}),Je=function(e){var t=e.name,n=e.connected,r=e.balance,c=e.onClick;return Object(a.jsxs)(ae.a,{className:"player-card text-center",children:[null!==n&&Object(a.jsx)(Re,{connected:n,className:"m-2"}),Object(a.jsxs)(ae.a.Body,{className:"p-3",onClick:c,children:[Object(a.jsx)("div",{children:t}),Object(a.jsx)("div",{children:Number.isFinite(r)?xe(r):"\u221e"})]})]})},Ye=(n(132),function(e){var t=e.events,n=e.players,c=Object(r.useState)([]),i=Object(le.a)(c,2),l=i[0],o=i[1],s=function(e){if("freeParking"===e)return W;if("bank"===e)return U;var t,a=n.find((function(t){return t.playerId===e}));return null!==(t=null===a||void 0===a?void 0:a.name)&&void 0!==t?t:"[Deleted User]"};return Object(r.useEffect)((function(){t.filter((function(e){return"transaction"===e.type})).forEach((function(e){-oe.DateTime.fromISO(e.time).diffNow().as("milliseconds")<1e4&&(o((function(t){return[].concat(Object(ce.a)(t.filter((function(t){return t.time!==e.time}))),[e])})),setTimeout((function(){o((function(t){return t.filter((function(t){return t.time!==e.time}))}))}),1e4))}))}),[t.length]),Object(a.jsx)("div",{className:"recent-transactions text-center",children:l.map((function(e){return Object(a.jsxs)("small",{className:"d-block",children:[s(e.from)," \u2192 ",s(e.to)," (",xe(e.amount),")"]},e.time)}))})}),Le=function(e){var t,n=e.gameId,c=e.playerId,i=e.isGameOpen,o=e.players,s=e.freeParkingBalance,u=e.proposeTransaction,d=e.events,j=Object(r.useState)(null),b=Object(le.a)(j,2),m=b[0],p=b[1],h=Object(l.b)((function(){var e;return Object(a.jsx)(a.Fragment,{children:null!==m&&Object(a.jsx)(Fe,{balance:null!==(e=null===g||void 0===g?void 0:g.balance)&&void 0!==e?e:0,playerId:c,recipient:m,proposeTransaction:u,onClose:function(){return p(null)}})})}),[m]),f=Object(le.a)(h,2),O=f[0],y=f[1];Object(r.useEffect)((function(){null!==m?O():y()}),[m,O,y]);var g=o.find((function(e){return e.playerId===c})),v=null!==(t=null===g||void 0===g?void 0:g.banker)&&void 0!==t&&t;return Object(a.jsxs)("div",{className:"funds",children:[i&&Object(a.jsx)(Ae,{gameId:n,isBanker:v}),Object(a.jsx)(ae.a,{className:"mb-1 text-center",children:void 0!==g&&Object(a.jsxs)(ae.a.Body,{className:"p-3",children:[g.name,": ",xe(g.balance)]})}),Object(a.jsx)("div",{className:"mb-1 balance-grid",children:ke(o.filter((function(e){return e.playerId!==c}))).map((function(e){return Object(a.jsx)(Je,{name:e.name,connected:e.connected,balance:e.balance,onClick:function(){return p(e)}},e.playerId)}))}),Object(a.jsxs)("div",{className:"balance-grid",children:[Object(a.jsx)(Je,{name:W,connected:null,balance:s,onClick:function(){return p("freeParking")}}),Object(a.jsx)(Je,{name:U,connected:null,balance:Number.POSITIVE_INFINITY,onClick:function(){return p("bank")}})]}),Object(a.jsx)("div",{className:"mt-2",children:Object(a.jsx)(Ye,{events:d,players:o})})]})},_e=n(153),Ve=n(154),Ue=n(92),We=function(e){var t,n=e.label,c=e.submitText,i=e.players,l=e.onSubmit,o=n.toLowerCase().replace(" ","-"),s=Object(r.useState)(null),u=Object(le.a)(s,2),d=u[0],j=u[1],m=Object(r.useState)(null),p=Object(le.a)(m,2),h=p[0],f=p[1],O=Object(r.useState)(null),y=Object(le.a)(O,2),g=y[0],v=y[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{htmlFor:o,className:"mb-1",children:n}),Object(a.jsx)(Me,{amount:d,setAmount:j,id:o}),Object(a.jsxs)(_e.a,{className:"mt-1 player-and-submit-group",children:[Object(a.jsx)(Ve.a,{as:_e.a,variant:"outline-secondary",id:"".concat(o,"-player"),title:null!==(t=null===h||void 0===h?void 0:h.name)&&void 0!==t?t:"Select Player",children:i.map((function(e){return Object(a.jsx)(Ue.a.Item,{onClick:function(){return f(e)},children:e.name},e.playerId)}))}),Object(a.jsx)(b.a,{variant:"outline-secondary",onClick:function(){null===d?v("Please provide an amount"):d<=0?v("You must provide sum larger than $0"):Number.isInteger(d)?null===h?v("No player is selected"):(l(d,h.playerId),j(null),f(null),v(null)):v("The amount must be a whole number")},children:c})]}),Object(a.jsx)(Te.a.Text,{style:{color:"var(--danger)"},children:g})]})},$e=(n(133),function(e){var t,n=e.players,c=e.freeParkingBalance,i=e.onSubmit,l=Object(r.useState)(null),o=Object(le.a)(l,2),s=o[0],u=o[1],d=null!==s;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("label",{htmlFor:"free-parking-player",className:"mb-1",children:["Give Free Parking (",xe(c),")"]}),Object(a.jsxs)(_e.a,{className:"mt-1 player-and-submit-group",children:[Object(a.jsx)(Ve.a,{as:_e.a,variant:"outline-secondary",id:"free-parking-player",title:null!==(t=null===s||void 0===s?void 0:s.name)&&void 0!==t?t:"Select Player",children:n.map((function(e){return Object(a.jsx)(Ue.a.Item,{onClick:function(){return u(e)},children:e.name},e.playerId)}))}),Object(a.jsx)(b.a,{variant:"outline-secondary",onClick:function(){null!==s&&(i(s.playerId),u(null))},disabled:!d,children:"Give"})]})]})}),qe=function(e){var t=e.submitAmount,n=e.onClose,c=Object(r.useState)(null),i=Object(le.a)(c,2),l=i[0],o=i[1],s=Object(r.useState)(null),u=Object(le.a)(s,2),d=u[0],j=u[1],m=function(){o(null),j(null),n()};return Object(a.jsxs)(Ge.a,{show:!0,onHide:m,size:"lg",centered:!0,className:"send-money-modal",children:[Object(a.jsx)(Ge.a.Header,{closeButton:!0,children:Object(a.jsx)(Ge.a.Title,{children:"Initialise Balances"})}),Object(a.jsxs)(Ge.a.Body,{children:[Object(a.jsx)("p",{children:"Once you give a player money or initialise balances, you can not initialise balances again."}),Object(a.jsx)(Me,{amount:l,setAmount:o}),Object(a.jsx)(b.a,{block:!0,variant:"success",className:"mt-1",onClick:function(){null===l?j("Please provide an amount"):l<=0?j("You must provide sum larger than $0"):(t(l),m())},children:"Initialise"}),Object(a.jsx)(Te.a.Text,{style:{color:"var(--danger)"},children:d})]})]})},Ke=function(e){var t=e.players,n=e.proposeTransaction,r=Object(l.b)((function(){return Object(a.jsx)(qe,{submitAmount:function(e){t.forEach((function(t){n("bank",t.playerId,e)}))},onClose:o})})),c=Object(le.a)(r,2),i=c[0],o=c[1];return Object(a.jsx)(b.a,{variant:"primary",block:!0,onClick:i,children:"Initialise Player Balances"})},Qe=function(e){var t,n=e.players,c=e.onSubmit,i=Object(r.useState)(null),o=Object(le.a)(i,2),s=o[0],u=o[1],d=Object(r.useState)(null),j=Object(le.a)(d,2),m=j[0],p=j[1],h=ue()("passingGoRewardValue",2e6),f=Object(le.a)(h,2),O=f[0],y=f[1],g=Object(r.useState)(null!==O&&void 0!==O?O:2e6),v=Object(le.a)(g,2),x=v[0],k=v[1],w=Object(r.useState)(x),I=Object(le.a)(w,2),P=I[0],S=I[1],N=Object(l.b)((function(){return Object(a.jsxs)(Ge.a,{show:!0,onHide:T,size:"lg",centered:!0,children:[Object(a.jsx)(Ge.a.Header,{closeButton:!0,children:Object(a.jsx)(Ge.a.Title,{children:"Update Player Passing Go Reward"})}),Object(a.jsxs)(Ge.a.Body,{children:[Object(a.jsxs)(Ee.a,{children:[Object(a.jsx)(Ee.a.Prepend,{children:Object(a.jsx)(Ee.a.Text,{children:"Amount"})}),Object(a.jsx)(Be.a,{allowNegative:!1,thousandSeparator:!0,prefix:"$",value:P,onValueChange:function(e){var t=e.value;S(parseInt(t,10))},className:"form-control",autoComplete:"off",decimalScale:0,inputMode:"decimal"}),Object(a.jsx)(b.a,{variant:"success",onClick:function(){k(P),T()},className:"remove-left-border-radius",children:"Set"})]}),Object(a.jsx)(Te.a.Text,{style:{color:"var(--danger)"},children:m})]})]})}),[P,S]),C=Object(le.a)(N,2),G=C[0],T=C[1];Object(r.useEffect)((function(){y(x)}),[x]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("label",{htmlFor:"player-passed-go",className:"mb-1",children:["Player Passed Go (",xe(x),")"]}),Object(a.jsxs)(_e.a,{className:"mt-1 settings-and-player-and-submit-group",children:[Object(a.jsx)(b.a,{variant:"outline-secondary",onClick:G,children:"\u2699\ufe0f"}),Object(a.jsx)(Ve.a,{as:_e.a,variant:"outline-secondary",id:"player-passed-go",title:null!==(t=null===s||void 0===s?void 0:s.name)&&void 0!==t?t:"Select Player",children:n.map((function(e){return Object(a.jsx)(Ue.a.Item,{onClick:function(){return u(e)},children:e.name},e.playerId)}))}),Object(a.jsx)(b.a,{variant:"outline-secondary",onClick:function(){null!==s?(c(x,s.playerId),u(null),p(null)):p("No player selected")},children:"Give"})]}),Object(a.jsx)(Te.a.Text,{style:{color:"var(--danger)"},children:m})]})},Xe=function(e){var t=e.players,n=e.freeParkingBalance,r=e.hasATransactionBeenMade,c=e.proposeTransaction;return Object(a.jsxs)("div",{className:"bank",children:[!r&&Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)(Ke,{players:t,proposeTransaction:c})}),Object(a.jsx)("div",{className:"mb-4",children:Object(a.jsx)(We,{label:"Give Money To Player",submitText:"Send",players:t,onSubmit:function(e,t){return c("bank",t,e)}})}),Object(a.jsx)("div",{className:"mb-4",children:Object(a.jsx)(Qe,{players:t,onSubmit:function(e,t){return c("bank",t,e)}})}),Object(a.jsx)("div",{className:"mb-4",children:Object(a.jsx)($e,{players:t,freeParkingBalance:n,onSubmit:function(e){return c("freeParking",e,n)}})}),Object(a.jsx)("div",{className:"mb-4",children:Object(a.jsx)(We,{label:"Take Money From Player",submitText:"Take",players:t,onSubmit:function(e,t){return c(t,"bank",e)}})})]})},Ze=n(27),et=(n(139),function(e,t,n){var a={id:"".concat(e.type+e.time),time:oe.DateTime.fromISO(e.time).toFormat("h:mm a")};switch(e.type){case"playerJoin":var r=n.players.find((function(t){return t.playerId===e.playerId}));return Object(ie.a)(Object(ie.a)({},a),{},{title:"Player Join",actionedBy:null,detail:"".concat(r.name," joined"),colour:"cyan"});case"playerBankerStatusChange":var c=n.players.find((function(t){return t.playerId===e.playerId})),i=t.players.find((function(t){return t.playerId===e.actionedBy}));return Object(ie.a)(Object(ie.a)({},a),{},{title:"Player Banker Status Change",actionedBy:i.name,detail:"".concat(c.name," was made a banker"),colour:"yellow"});case"transaction":var l="bank"===e.to?U:"freeParking"===e.to?W:n.players.find((function(t){return t.playerId===e.to})).name,o="bank"===e.from?U:"freeParking"===e.from?W:n.players.find((function(t){return t.playerId===e.from})).name,s=t.players.find((function(t){return t.playerId===e.actionedBy}));return Object(ie.a)(Object(ie.a)({},a),{},{title:"Transaction",actionedBy:s.playerId===e.from?null:s.name,detail:"".concat(o," \u2192 ").concat(l," (").concat(xe(e.amount),")"),colour:"green"});case"playerNameChange":var u=t.players.find((function(t){return t.playerId===e.playerId})).name,d=n.players.find((function(t){return t.playerId===e.playerId})).name,j=t.players.find((function(t){return t.playerId===e.actionedBy}));return Object(ie.a)(Object(ie.a)({},a),{},{title:"Player Name Change",actionedBy:j.playerId===e.playerId?null:j.name,detail:"".concat(u," was renamed to ").concat(d),colour:"orange"});case"playerDelete":var b=t.players.find((function(t){return t.playerId===e.playerId})).name,m=t.players.find((function(t){return t.playerId===e.actionedBy}));return Object(ie.a)(Object(ie.a)({},a),{},{title:"Player Removal",actionedBy:m.playerId===e.playerId?null:m.name,detail:"".concat(b," was removed from the game"),colour:"red"});case"gameOpenStateChange":var p=t.players.find((function(t){return t.playerId===e.actionedBy}));return Object(ie.a)(Object(ie.a)({},a),{},{title:"Game Open State Change",actionedBy:p.name,detail:"The game is now ".concat(e.open?"open":"closed"," to new players"),colour:"blue"});case"playerConnectionChange":return null}}),tt=function(e){var t=e.events,n=Ze.defaultGameState,r=t.map((function(e){var t=Object(Ze.calculateGameState)([e],n),a=et(e,n,t);return n=t,a}));return Object(a.jsx)("div",{className:"history",children:r.reverse().map((function(e){return null===e?null:Object(a.jsxs)("div",{className:"event mb-2",children:[Object(a.jsx)("div",{className:"bar",style:{background:"var(--".concat(e.colour,")")}}),Object(a.jsxs)("div",{className:"event-details",children:[Object(a.jsxs)("div",{className:"top",children:[Object(a.jsx)("small",{children:e.title}),Object(a.jsxs)("small",{children:[null!==e.actionedBy&&Object(a.jsxs)("span",{className:"mr-2",children:["(\u270d\ufe0f ",e.actionedBy,")"]}),e.time]})]}),Object(a.jsx)("div",{className:"detail",children:e.detail})]})]},e.id)}))})},nt=n(155),at=n(88),rt=function(e){var t=e.player,n=e.proposePlayerNameChange,c=e.onClose,i=Object(r.useState)(t.name),l=Object(le.a)(i,2),o=l[0],s=l[1],u=Object(r.useState)(null),d=Object(le.a)(u,2),j=d[0],m=d[1];return Object(a.jsxs)(Ge.a,{show:!0,onHide:c,size:"lg",centered:!0,children:[Object(a.jsx)(Ge.a.Header,{closeButton:!0,children:Object(a.jsx)(Ge.a.Title,{children:"Change Player Name"})}),Object(a.jsxs)(Ge.a.Body,{children:[Object(a.jsxs)(Ee.a,{children:[Object(a.jsx)(Ee.a.Prepend,{children:Object(a.jsx)(Ee.a.Text,{children:"Name"})}),Object(a.jsx)(at.a,{value:o,onChange:function(e){return s(e.currentTarget.value)}}),Object(a.jsx)(b.a,{variant:"success",onClick:function(){m(""===o?"Name must not be empty":null),n(t.playerId,o),c()},className:"remove-left-border-radius",children:"Rename"})]}),Object(a.jsx)(Te.a.Text,{style:{color:"var(--danger)"},children:j})]})]})},ct=function(e){var t=e.player,n=e.proposePlayerDelete,r=e.onClose;return Object(a.jsxs)(Ge.a,{show:!0,onHide:r,size:"lg",centered:!0,children:[Object(a.jsx)(Ge.a.Header,{closeButton:!0,children:Object(a.jsx)(Ge.a.Title,{children:"Remove Player"})}),Object(a.jsx)(Ge.a.Body,{children:Object(a.jsxs)("p",{children:["Are you sure you want to remove ",t.name,"?"]})}),Object(a.jsxs)(Ge.a.Footer,{children:[Object(a.jsx)(b.a,{variant:"danger",onClick:r,children:"Cancel"}),Object(a.jsx)(b.a,{variant:"success",className:" ml-1",onClick:function(){n(t.playerId),r()},children:"Remove"})]})]})},it=function(e){var t=e.proposeGameEnd,n=e.onClose;return Object(a.jsxs)(Ge.a,{show:!0,onHide:n,size:"lg",centered:!0,children:[Object(a.jsx)(Ge.a.Header,{closeButton:!0,children:Object(a.jsx)(Ge.a.Title,{children:"End Game"})}),Object(a.jsxs)(Ge.a.Body,{children:[Object(a.jsx)("p",{children:"Are you sure you want to end the game?"}),Object(a.jsx)("p",{children:"This will kick everyone and you will not be able to re-join the game."})]}),Object(a.jsxs)(Ge.a.Footer,{children:[Object(a.jsx)(b.a,{variant:"danger",onClick:n,children:"Cancel"}),Object(a.jsx)(b.a,{variant:"success",className:" ml-1",onClick:function(){t(),n()},children:"End Game"})]})]})},lt=(n(140),function(e){var t=e.isGameOpen,n=e.players,c=e.proposePlayerNameChange,i=e.proposePlayerDelete,o=e.proposeGameOpenStateChange,s=e.proposeGameEnd,u=Object(r.useState)(null),d=Object(le.a)(u,2),j=d[0],m=d[1],p=Object(l.b)((function(){return Object(a.jsx)(a.Fragment,{children:null!==j&&Object(a.jsx)(rt,{player:j,proposePlayerNameChange:c,onClose:O})})}),[j]),h=Object(le.a)(p,2),f=h[0],O=h[1],y=Object(l.b)((function(){return Object(a.jsx)(a.Fragment,{children:null!==j&&Object(a.jsx)(ct,{player:j,proposePlayerDelete:i,onClose:x})})}),[j]),g=Object(le.a)(y,2),v=g[0],x=g[1],k=Object(l.b)((function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(it,{proposeGameEnd:s,onClose:P})})}),[j]),w=Object(le.a)(k,2),I=w[0],P=w[1];return Object(a.jsxs)("div",{className:"settings",children:[Object(a.jsxs)(nt.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Balance"}),Object(a.jsx)("th",{})]})}),Object(a.jsx)("tbody",{children:ke(n).map((function(e){return Object(a.jsxs)("tr",{className:"player-row",children:[Object(a.jsx)("td",{children:Object(a.jsx)(Re,{connected:e.connected})}),Object(a.jsx)("td",{children:e.name}),Object(a.jsx)("td",{children:xe(e.balance)}),Object(a.jsxs)("td",{children:[Object(a.jsx)(b.a,{variant:"outline-secondary",size:"sm",title:"Rename",onClick:function(){m(e),f()},children:Object(a.jsx)("span",{role:"img","aria-label":"Rename",children:"\u270f\ufe0f"})}),Object(a.jsx)(b.a,{variant:"outline-danger",size:"sm",title:"Remove",className:"ml-1",onClick:function(){m(e),v()},children:Object(a.jsx)("span",{role:"img","aria-label":"Remove",children:"\ud83d\uddd1\ufe0f"})})]})]},e.playerId)}))})]}),Object(a.jsxs)(b.a,{block:!0,variant:"primary",onClick:function(){return o(!t)},children:[t?"Close":"Open"," Game To New Players"]}),Object(a.jsx)(b.a,{block:!0,variant:"danger",onClick:function(){return I()},children:"End Game"})]})}),ot=function(e){var t=e.newGame,n=e.onGameSetup,c=t?"Create Game":"Join Game",i=ve(!1).storedGames,l=Object(r.useState)(!1),o=Object(le.a)(l,2),s=o[0],u=o[1],d=Object(r.useState)(""),j=Object(le.a)(d,2),m=j[0],p=j[1],h=Object(r.useState)(""),f=Object(le.a)(h,2),O=f[0],y=f[1],g=Object(r.useState)(null),v=Object(le.a)(g,2),x=v[0],k=v[1],w=Object(r.useState)(null),I=Object(le.a)(w,2),P=I[0],S=I[1],N=-1!==i.map((function(e){return e.gameId})).indexOf(m),C=function(){if(N){var e=i.find((function(e){return e.gameId===m}));n(e.gameId,e.userToken,e.playerId)}else if(t){if(""===O)return void S("Please provide your name");S(null),u(!0),function(e){return fetch("".concat(me.api.root,"/api/game"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){if(200===e.status)return e.json();throw new Error("Server Error (HTTP".concat(e.status,")"))}))}(O).then((function(e){n(e.gameId,e.userToken,e.playerId)})).catch((function(e){return console.log(e)})).finally((function(){return u(!1)}))}else{if(""===m)return void k("Please provide the game Id");if(k(null),""===O)return void S("Please provide your name");S(null),u(!0),pe(m,O).then((function(e){"DoesNotExist"===e?k("That game does not exist"):"NotOpen"===e?k("That game is not open. Ask the banker to open the game."):n(e.gameId,e.userToken,e.playerId)})).catch((function(e){return console.log(e)})).finally((function(){return u(!1)}))}};return Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)("h1",{children:c}),!t&&Object(a.jsxs)(Te.a.Group,{children:[Object(a.jsx)(Te.a.Label,{children:"Game Id"}),Object(a.jsx)(Be.a,{allowNegative:!1,format:"######",placeholder:"123456",value:m,onValueChange:function(e){var t=e.value;return p(t)},className:"form-control text-center",autoComplete:"off",inputMode:"decimal"}),Object(a.jsx)(Te.a.Text,{style:{color:"var(--danger)"},children:x})]}),N?Object(a.jsx)("p",{children:Object(a.jsx)("em",{children:"You're already in this game - name is not required."})}):Object(a.jsxs)(Te.a.Group,{children:[Object(a.jsx)(Te.a.Label,{children:"Your Name"}),Object(a.jsx)(Te.a.Control,{placeholder:"Name",value:O,className:"text-center",onChange:function(e){return y(e.currentTarget.value)},onKeyDown:function(e){return"Enter"===e.key&&C()},autoComplete:"on"}),Object(a.jsx)(Te.a.Text,{style:{color:"var(--danger)"},children:P})]}),Object(a.jsx)(b.a,{block:!0,variant:"primary",onClick:C,disabled:s,children:t?"Create":"Join"})]})},st=n.p+"static/media/pages.b841b5b8.png",ut=(n(141),function(){return Object(a.jsxs)("div",{className:"help",children:[Object(a.jsx)("h3",{className:"text-center",children:"Monopoly Money Help"}),Object(a.jsx)("p",{className:"lead mt-2 text-center",children:"A small gide to Monopoly Money."}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"#pages",children:"Pages"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"#player-help",children:"Player Help"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"#banker-help",children:"Banker Help"})})]}),Object(a.jsx)("h4",{id:"pages",children:"Pages"}),Object(a.jsx)("img",{src:st,alt:"Titles for each page",className:"mw-100"}),Object(a.jsx)("h4",{id:"player-help",children:"Player Help"}),Object(a.jsx)("h5",{children:"Joining a Game"}),Object(a.jsx)("p",{children:'To join a game, select "Join Game" from the home page and then enter the game id (the banker will have this) and your name. Press "Join" when you have filled out all the fields.'}),Object(a.jsx)("h5",{children:"Transferring Funds to Other Players, Free Parking and the Bank"}),Object(a.jsx)("p",{children:'To transfer funds to another person/entity, click the tile associated with the target player/entity on the funds page. A dialog should appear which will allow you to input an amount to transfer. Press "Send" to complete the transaction.'}),Object(a.jsx)("h5",{children:"Viewing Previous Transactions"}),Object(a.jsx)("p",{children:"Monopoly money allows you to view all events including transactions that have previously ocurred in the game. Go to the history page to view these events."}),Object(a.jsx)("h4",{id:"banker-help",children:"Banker Help"}),Object(a.jsx)("h5",{children:"Creating a Game"}),Object(a.jsx)("p",{children:'To create a game, select "New Game" from the home page, enter your name (this will be your player name) and press "Create".'}),Object(a.jsx)("h5",{children:"Initialising Player Balances"}),Object(a.jsx)("p",{children:"Initialising a game sets everyone's balance to an initial value in one action; this option is only available if no transaction has been made yet."}),Object(a.jsxs)("p",{children:['Clicking the "Initialise Player Balances" button on the banker page, providing and amount and pressing "Initialise" will set all players balances to the provided value.'," "]}),Object(a.jsx)("h5",{children:"Giving Money to Players from the Bank"}),Object(a.jsx)("p",{children:'On the bank page under the "Give Money To Player" label is a form to give money to players. Provide the amount and then select a target player from the dropdown. Pressing send will complete the transaction.'}),Object(a.jsx)("h5",{children:"Moving Money from Players from the Bank"}),Object(a.jsx)("p",{children:'You can also do the opposite of above using the form under "Take Money From Player"; move money from a player to the bank.'}),Object(a.jsx)("p",{children:"This is typically not a required action but is provided in the case that the banker accidentally gives too much money to a player."}),Object(a.jsx)("h5",{children:"Players Passing GO"}),Object(a.jsx)("p",{children:'Instead of repeatedly inputting the passing GO reward, a dropdown is displayed on the bank page under the "Player Passed Go ($[amount])" header. Selecting a player and then pressing "Give" will give the player the amount displayed above.'}),Object(a.jsx)("p",{children:'To change the amount given to a player, press the settings button to the right, input a new amount and press "Set".'}),Object(a.jsx)("h5",{children:"Giving Free Parking to a Player"}),Object(a.jsx)("p",{children:'To give free parking to a player, select the player in the dropdown under the "Give Free Parking" label and press "Give" to complete the transaction.'}),Object(a.jsx)("h5",{children:"Changing a Player's Name"}),Object(a.jsx)("p",{children:'You can change a players name on the settings page by clicking the pencil button in the same row as they target player. Modifying the name and clicking "Rename" will rename the player.'}),Object(a.jsx)("h5",{children:"Removing a Player"}),Object(a.jsx)("p",{children:"You can remove a player from the game the settings page by clicking the trash button in the same row as they target player. Confirming this action will remove the player from the current game."}),Object(a.jsx)("h5",{children:"Closing the Game to New Players"}),Object(a.jsx)("p",{children:'Closing the game stops new players from joining and hides the game code from the funds page. To do this, select "Close Game To New Players" on the settings page. This is helpful if everyone has joined the game and you don\'t need anyone else to join.'}),Object(a.jsx)("p",{children:"To re-open the game, press the same button again."}),Object(a.jsx)("h5",{children:"Ending the Game"}),Object(a.jsx)("p",{children:'You can end the game by clicking "End Game" on the setting page and confirming. This will fully delete the game and kick everyone. You cannot go back into a game after ending it.'})]})}),dt=n(90),jt=n(91),bt=function(){function e(t,n,a,r,c){var i=this;Object(dt.a)(this,e),this.gameId=void 0,this.userToken=void 0,this.playerId=void 0,this.onGameStateChange=void 0,this.onDisplayMessage=void 0,this.events=[],this.webSocket=void 0,this.gameState=Ze.defaultGameState,this.gameEnd=function(e){switch(i.webSocket.close(),e){case"end":i.onDisplayMessage("Game Ended","The game has been ended by the banker.",i.gameState);break;case"removed":var t=Object(Ze.calculateGameState)(i.events.slice(0,-1),Ze.defaultGameState);i.onDisplayMessage("Removed From Game","You have been intentionally removed from the game by the banker.",t);break;case"unexpectedWebSocketClosure":we().gtag("event","Unexpected server disconnection",{event_category:"Network",non_interaction:!0}),i.onDisplayMessage("Disconnection from the server","Unexpectedly disconnection from the server. Please make sure you are connected to the internet",i.gameState)}},this.gameId=t,this.userToken=n,this.playerId=a,this.onGameStateChange=r,this.onDisplayMessage=c;var l=me.api.root.replace(/http?/g,"ws");this.webSocket=new WebSocket("".concat(l,"/api/events")),this.webSocket.onmessage=this.onWebSocketMessage.bind(this),this.webSocket.addEventListener("open",(function(e){var t={type:"auth",gameId:i.gameId,userToken:i.userToken};i.webSocket.send(JSON.stringify(t))})),this.webSocket.addEventListener("close",(function(e){e.wasClean||(i.gameEnd("unexpectedWebSocketClosure"),i.onGameStateChange(!0))}))}return Object(jt.a)(e,[{key:"getState",value:function(){return this.gameState}},{key:"getEvents",value:function(){return this.events}},{key:"amIABanker",value:function(){var e,t=this,n=this.gameState.players.find((function(e){return e.playerId===t.playerId}));return null!==(e=null===n||void 0===n?void 0:n.banker)&&void 0!==e&&e}},{key:"proposeTransaction",value:function(e,t,n){var a={time:"",actionedBy:"",type:"transaction",from:e,to:t,amount:n};this.submitEvent(a)}},{key:"proposePlayerNameChange",value:function(e,t){var n={time:"",actionedBy:"",type:"playerNameChange",playerId:e,name:t};this.submitEvent(n)}},{key:"proposePlayerDelete",value:function(e){var t={time:"",actionedBy:"",type:"playerDelete",playerId:e};this.submitEvent(t)}},{key:"proposeGameOpenStateChange",value:function(e){var t={time:"",actionedBy:"",type:"gameOpenStateChange",open:e};this.submitEvent(t)}},{key:"proposeGameEnd",value:function(){this.webSocket.send(JSON.stringify({type:"proposeEndGame"}))}},{key:"onWebSocketMessage",value:function(e){var t=JSON.parse(e.data);"initialEventArray"===t.type?(this.events=t.events,this.gameState=Object(Ze.calculateGameState)(this.events,this.gameState)):"newEvent"===t.type?(this.events.push(t.event),this.gameState=Object(Ze.calculateGameState)([t.event],this.gameState)):"gameEnd"===t.type&&this.gameEnd("end");var n=-1!==this.gameState.players.map((function(e){return e.playerId})).indexOf(this.playerId);n||this.gameEnd("removed");var a="gameEnd"===t.type||!n;this.onGameStateChange(a)}},{key:"submitEvent",value:function(e){var t={type:"proposeEvent",event:e};this.webSocket.send(JSON.stringify(t))}}]),e}(),mt=function(e){var t=e.title,n=e.body,r=e.onClose;return Object(a.jsxs)(Ge.a,{show:!0,onHide:r,size:"lg",centered:!0,className:"send-money-modal",children:[Object(a.jsx)(Ge.a.Header,{closeButton:!0,children:Object(a.jsxs)(Ge.a.Title,{children:[" ",t," "]})}),Object(a.jsx)(Ge.a.Body,{children:n}),Object(a.jsx)(Ge.a.Footer,{children:Object(a.jsx)(b.a,{block:!0,variant:"primary",onClick:r,children:"Ok"})})]})},pt=function(){var e=Object(r.useState)(null),t=Object(le.a)(e,2),n=t[0],c=t[1],i=Object(l.b)((function(){return Object(a.jsx)(a.Fragment,{children:null!==n&&Object(a.jsx)(mt,Object(ie.a)(Object(ie.a)({},n),{},{onClose:u}))})}),[n]),o=Object(le.a)(i,2),s=o[0],u=o[1];return function(e){c(e),s()}},ht=function(){var e=function(){var e=Object(r.useState)(),t=Object(le.a)(e,2)[1];return Object(r.useCallback)((function(){return t({})}),[])}(),t=Object(r.useState)(null),n=Object(le.a)(t,2),c=n[0],i=n[1],l=pt(),o=function(e,t,n){l({title:e,body:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:t}),Object(a.jsx)("p",{className:"mb-0",children:"Here was the games progress:"}),Object(a.jsxs)("ul",{className:"mb-1",children:[n.players.map((function(e){return Object(a.jsxs)("li",{children:[e.name,": ",xe(e.balance)]},e.playerId)})),Object(a.jsxs)("li",{children:["Free Parking: ",xe(n.freeParkingBalance)]})]}),Object(a.jsx)("small",{children:"(Provided just in the case you need to re-create the game)"})]})})};return{initialize:function(t){var n=t.gameId,a=t.userToken,r=t.playerId;i(new bt(n,a,r,(function(t){t?i(null):e()}),o))},clear:function(){null!==c&&c.gameEnd(null),i(null)},authInfo:null===c?null:{gameId:c.gameId,userToken:c.userToken,playerId:c.playerId},game:null===c?null:Object(ie.a)(Object(ie.a)({},c.getState()),{},{gameId:c.gameId,playerId:c.playerId,isBanker:c.amIABanker(),events:c.getEvents(),actions:{proposeTransaction:c.proposeTransaction.bind(c),proposePlayerNameChange:c.proposePlayerNameChange.bind(c),proposePlayerDelete:c.proposePlayerDelete.bind(c),proposeGameOpenStateChange:c.proposeGameOpenStateChange.bind(c),proposeGameEnd:c.proposeGameEnd.bind(c)}})}},ft=function(e,t){return Object(a.jsx)(Z,{route:e,children:Object(a.jsx)(ne,{children:t})})},Ot=function(){var e,t,n=ve(!1).storeGame,c=ht(),i=c.game,l=c.authInfo,u=c.initialize,d=c.clear,j=Object(s.usePath)();Object(r.useEffect)((function(){we().gtag("event","page_view",{page_location:window.location.origin+window.location.pathname,page_path:window.location.pathname,page_title:document.title})}),[j]),Object(r.useEffect)((function(){j!==$.home&&j!==$.join&&j!==$.newGame||m()}),[j]),Object(r.useEffect)((function(){-1===Object.values($).indexOf(j)&&Object(s.navigate)("/")}),[j]),Object(r.useEffect)((function(){null===i&&Object(s.navigate)("/")}),[i]);var b=function(e,t,a){null!==l&&n(l.gameId,l.userToken,l.playerId),u({gameId:e,userToken:t,playerId:a}),n(e,t,a),Object(s.navigate)("/funds")},m=function(){null!==l&&n(l.gameId,l.userToken,l.playerId),d()},p=function(){return Object(a.jsx)(Ce,{onGameSetup:b})},h=(e={},Object(o.a)(e,$.home,(function(){return ft($.home,Object(a.jsx)(Ce,{onGameSetup:b}))})),Object(o.a)(e,$.join,(function(){return ft($.join,Object(a.jsx)(ot,{newGame:!1,onGameSetup:b}))})),Object(o.a)(e,$.newGame,(function(){return ft($.newGame,Object(a.jsx)(ot,{newGame:!0,onGameSetup:b}))})),Object(o.a)(e,$.funds,null!==i?function(){return ft($.funds,Object(a.jsx)(Le,{gameId:i.gameId,playerId:i.playerId,isGameOpen:i.open,players:i.players,freeParkingBalance:i.freeParkingBalance,proposeTransaction:i.actions.proposeTransaction,events:i.events}))}:function(){return Object(a.jsx)(p,{})}),Object(o.a)(e,$.bank,null!==i&&i.isBanker?function(){return ft($.bank,Object(a.jsx)(Xe,{players:i.players,freeParkingBalance:i.freeParkingBalance,hasATransactionBeenMade:i.events.filter((function(e){return"transaction"===e.type})).length>0,proposeTransaction:i.actions.proposeTransaction}))}:function(){return Object(a.jsx)(p,{})}),Object(o.a)(e,$.history,null!==i?function(){return ft($.history,Object(a.jsx)(tt,{events:i.events}))}:function(){return Object(a.jsx)(p,{})}),Object(o.a)(e,$.settings,null!==i&&i.isBanker?function(){return ft($.settings,Object(a.jsx)(lt,{isGameOpen:i.open,players:i.players,proposePlayerNameChange:i.actions.proposePlayerNameChange,proposePlayerDelete:i.actions.proposePlayerDelete,proposeGameOpenStateChange:i.actions.proposeGameOpenStateChange,proposeGameEnd:i.actions.proposeGameEnd}))}:function(){return Object(a.jsx)(p,{})}),Object(o.a)(e,$.help,(function(){return ft($.help,Object(a.jsx)(ut,{}))})),e),f=Object(s.useRoutes)(h);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K,{inGame:null!==i,isBanker:null!==(t=null===i||void 0===i?void 0:i.isBanker)&&void 0!==t&&t}),Object(a.jsx)("div",{className:"my-3",children:f||Object(a.jsx)(p,{})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(142);i.a.render(Object(a.jsx)(l.a,{children:Object(a.jsx)(Ot,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},27:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateGameState=t.defaultGameState=void 0;var a=n(134);Object.defineProperty(t,"defaultGameState",{enumerable:!0,get:function(){return a.defaultGameState}}),Object.defineProperty(t,"calculateGameState",{enumerable:!0,get:function(){return a.calculateGameState}})}},[[143,1,2]]]);