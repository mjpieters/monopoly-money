(this["webpackJsonp@monopoly-money/client"]=this["webpackJsonp@monopoly-money/client"]||[]).push([[0],{118:function(e,a,t){},119:function(e,a,t){},122:function(e,a,t){},123:function(e,a,t){"use strict";var n=t(124);Object.defineProperty(a,"__esModule",{value:!0}),a.defaultGameState={players:[],freeParkingBalance:0,open:!0},a.calculateGameState=function(e,a){return e.reduce((function(e,a){switch(a.type){case"playerJoin":return Object.assign(Object.assign({},e),{players:[].concat(n(e.players),[{playerId:a.playerId,name:a.name,banker:!1,balance:0}])});case"playerDelete":return Object.assign(Object.assign({},e),{players:e.players.filter((function(e){return e.playerId!==a.playerId}))});case"playerNameChange":return Object.assign(Object.assign({},e),{players:e.players.map((function(e){return e.playerId===a.playerId?Object.assign(Object.assign({},e),{name:a.name}):e}))});case"playerBankerStatusChange":return Object.assign(Object.assign({},e),{players:e.players.map((function(e){return e.playerId===a.playerId?Object.assign(Object.assign({},e),{banker:a.isBanker}):e}))});case"transaction":if("bank"===a.from||"freeParking"===a.from){var t=e.players.find((function(e){return e.playerId===a.to}));if(void 0===t)throw new Error("Unable to find destination player");return Object.assign(Object.assign({},e),{players:[].concat(n(e.players.filter((function(e){return e.playerId!==a.from&&e.playerId!==a.to}))),[Object.assign(Object.assign({},t),{balance:t.balance+a.amount})]),freeParkingBalance:"freeParking"===a.from?e.freeParkingBalance-a.amount:e.freeParkingBalance})}if("bank"===a.to||"freeParking"===a.to){var r=e.players.find((function(e){return e.playerId===a.from}));if(void 0===r)throw new Error("Unable to find source player");return Object.assign(Object.assign({},e),{players:[].concat(n(e.players.filter((function(e){return e.playerId!==a.from&&e.playerId!==a.to}))),[Object.assign(Object.assign({},r),{balance:r.balance-a.amount})]),freeParkingBalance:"freeParking"===a.to?e.freeParkingBalance+a.amount:e.freeParkingBalance})}var l=e.players.find((function(e){return e.playerId===a.from})),o=e.players.find((function(e){return e.playerId===a.to}));if(void 0===l||void 0===o)throw new Error("Unable to find source or destination player");return Object.assign(Object.assign({},e),{players:[].concat(n(e.players.filter((function(e){return e.playerId!==a.from&&e.playerId!==a.to}))),[Object.assign(Object.assign({},l),{balance:l.balance-a.amount}),Object.assign(Object.assign({},o),{balance:o.balance+a.amount})])});case"gameOpenStateChange":return Object.assign(Object.assign({},e),{open:a.open})}}),a)}},128:function(e,a,t){},129:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(9),o=t.n(l),c=(t(87),t(23)),i=t(10),s=t(13),u=t(144),m=t(134),p=t(143),d=t(72),f=t(29),y=t.n(f);function v(){return(v=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function g(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var b=r.a.createElement("g",null,r.a.createElement("rect",{fill:"none",height:24,width:24})),h=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("rect",{height:7,width:3,x:4,y:10}),r.a.createElement("rect",{height:7,width:3,x:10.5,y:10}),r.a.createElement("rect",{height:3,width:20,x:2,y:19}),r.a.createElement("rect",{height:7,width:3,x:17,y:10}),r.a.createElement("polygon",{points:"12,1 2,6 2,8 22,8 22,6"}))),E=function(e){var a=e.svgRef,t=e.title,n=g(e,["svgRef","title"]);return r.a.createElement("svg",v({enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",ref:a},n),t?r.a.createElement("title",null,t):null,b,h)},O=r.a.forwardRef((function(e,a){return r.a.createElement(E,v({svgRef:a},e))}));t.p;function k(){return(k=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function j(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var I=r.a.createElement("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"}),w=r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),S=function(e){var a=e.svgRef,t=e.title,n=j(e,["svgRef","title"]);return r.a.createElement("svg",k({viewBox:"0 0 24 24",ref:a},n),t?r.a.createElement("title",null,t):null,I,w)},N=r.a.forwardRef((function(e,a){return r.a.createElement(S,k({svgRef:a},e))}));t.p;function P(){return(P=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function C(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var x=r.a.createElement("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),T=r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),G=function(e){var a=e.svgRef,t=e.title,n=C(e,["svgRef","title"]);return r.a.createElement("svg",P({viewBox:"0 0 24 24",ref:a},n),t?r.a.createElement("title",null,t):null,x,T)},B=r.a.forwardRef((function(e,a){return r.a.createElement(G,P({svgRef:a},e))}));t.p;function M(){return(M=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function z(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var D,R=r.a.createElement("g",null,r.a.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"}),r.a.createElement("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})),H=function(e){var a=e.svgRef,t=e.title,n=z(e,["svgRef","title"]);return r.a.createElement("svg",M({enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",ref:a},n),t?r.a.createElement("title",null,t):null,R)},F=r.a.forwardRef((function(e,a){return r.a.createElement(H,M({svgRef:a},e))})),A=(t.p,"https://monopoly-money.nitratine.net"),J={home:"/",join:"/join",newGame:"/new-game",funds:"/funds",bank:"/bank",history:"/history",settings:"/settings"},L=(D={},Object(i.a)(D,J.home,{titlePrefix:"",description:"Monopoly Money helps you manage your finances in a game of monopoly from the browser.",index:!0}),Object(i.a)(D,J.join,{titlePrefix:"Join Game",description:"Join a Monopoly Money game",index:!0}),Object(i.a)(D,J.newGame,{titlePrefix:"New Game",description:"Create a new Monopoly Money game",index:!0}),Object(i.a)(D,J.funds,{titlePrefix:"Manage Funds",index:!1}),Object(i.a)(D,J.bank,{titlePrefix:"Bank",description:"TODO",index:!1}),Object(i.a)(D,J.history,{titlePrefix:"History",index:!1}),Object(i.a)(D,J.settings,{titlePrefix:"Settings",index:!1}),D),W=(t(99),function(e){var a=e.inGame,t=e.isBanker,n=Object(s.usePath)(),l=[{path:J.funds,active:a,title:"Funds",icon:N},{path:J.history,active:a,title:"History",icon:B},{path:J.bank,active:a&&t,title:"Bank",icon:O},{path:J.settings,active:a&&t,title:"Settings",icon:F}],o=function(e){return function(){return Object(s.navigate)(e)}};return r.a.createElement(u.a,{bg:"light",variant:"light",sticky:"top",className:"navigation"},r.a.createElement(m.a,null,r.a.createElement(u.a.Brand,{onClick:o("/"),className:"mr-1"},r.a.createElement("img",{src:y.a,height:"30",className:"d-inline-block align-top",alt:"Monopoly Money Banner Logo",style:{cursor:"pointer"}})),r.a.createElement(p.a,{className:"mr-auto"},l.filter((function(e){return e.active})).map((function(e){var a=e.icon;return r.a.createElement(p.a.Link,{key:e.path,href:"#",onClick:o(e.path),active:n===e.path,className:"p-0"},r.a.createElement(d.a,{variant:"light",title:e.title,className:"d-flex ml-1 icon-button"},r.a.createElement(a,{style:{height:25,width:25,fill:n===e.path?"black":"rgba(0,0,0,.65)"}}),r.a.createElement("span",{className:"ml-1 d-none d-sm-inline"},e.title)))})))))}),Y=t(73),V=t.n(Y),$=function(e){var a=e.route,t=e.children,n=L[a],l="".concat(n.titlePrefix," Monopoly Money");return V()({title:l,description:n.description,charset:"utf-8",lang:"en",metas:[{name:"robots",content:n.index?"index":"noindex, nofollow"}],links:[{rel:"canonical",href:A+a},{rel:"icon",type:"image/ico",href:"/favicon.ico"},{rel:"apple-touch-icon",type:"image/png",href:"/logo.png"}],openGraph:{title:l,image:A+y.a,site_name:"Monopoly Money"}}),r.a.createElement(r.a.Fragment,null,t)},_=t(135),U=t(74),q=function(e){var a=e.children;return r.a.createElement(m.a,null,r.a.createElement(_.a,{className:"justify-content-md-center"},r.a.createElement(U.a,{className:"col-md-10"},a)))},K=t(145),Q=t(136),X=t(57),Z=t(33),ee=t(6),ae=t(53),te=t(75),ne=t.n(te),re=t(43),le=t.n(re),oe=t(61),ce={api:{root:"https://monopoly-money-server.herokuapp.com"}},ie=function(){var e=Object(oe.a)(le.a.mark((function e(a,t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ce.api.root,"/api/game/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});case 2:if(200!==(n=e.sent).status){e.next=7;break}return e.abrupt("return",n.json());case 7:if(404!==n.status){e.next=11;break}return e.abrupt("return",Promise.resolve("DoesNotExist"));case 11:if(403!==n.status){e.next=15;break}return e.abrupt("return",Promise.resolve("NotOpen"));case 15:throw new Error("Server Error (HTTP".concat(n.status,")"));case 16:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),se=function(){var e=Object(oe.a)(le.a.mark((function e(a,t,n){var r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ce.api.root,"/api/game/").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Authorization:t},signal:null===n||void 0===n?void 0:n.signal});case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.abrupt("return",r.json());case 7:if(404!==r.status){e.next=11;break}return e.abrupt("return",Promise.resolve("DoesNotExist"));case 11:throw new Error("Server Error (HTTP".concat(r.status,")"));case 12:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),ue={},me=function(e,a){ue[e]=a},pe=function(e){return e in ue?ue[e]:null},de=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=Object(n.useState)((function(){return new AbortController})),t=Object(ee.a)(a,1),r=t[0],l=ne()("storedGames",[]),o=Object(ee.a)(l,2),c=o[0],i=o[1],s=Object(n.useState)([]),u=Object(ee.a)(s,2),m=u[0],p=u[1];console.log({storedGames:c,gameStatuses:m}),Object(n.useEffect)((function(){if(e){var a=m.map((function(e){return e.gameId})),t=(null!==c&&void 0!==c?c:[]).filter((function(e){return-1===a.indexOf(e.gameId)})),n=(null!==c&&void 0!==c?c:[]).map((function(e){return e.gameId}));p((function(e){return e.filter((function(e){return 1!==n.indexOf(e.gameId)}))})),p((function(e){return[].concat(Object(X.a)(e),Object(X.a)(t.map((function(e){return Object(Z.a)({},e,{status:pe(e.gameId)})}))))})),t.forEach((function(e){se(e.gameId,e.userToken,r).then((function(a){"DoesNotExist"===a?i((null!==c&&void 0!==c?c:[]).filter((function(a){return a.gameId!==e.gameId}))):(me(e.gameId,a),p((function(t){return t.map((function(t){return t.gameId!==e.gameId?t:Object(Z.a)({},e,{status:a})}))})))})).catch((function(e){return"DOMException"===(null===e||void 0===e?void 0:e.name)&&console.error(e)}))}))}else p((null!==c&&void 0!==c?c:[]).map((function(e){return Object(Z.a)({},e,{status:null})})))}),[c]);var d=function(e,a,t){i([].concat(Object(X.a)((null!==c&&void 0!==c?c:[]).filter((function(a){return a.gameId!==e}))),[{gameId:e,userToken:a,playerId:t,time:ae.DateTime.local().toISO()}]))};return Object(n.useEffect)((function(){return function(){r.abort()}}),[]),{storedGames:m,storeGame:d}},fe=(t(118),function(e){return"$"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),ye=function(e){var a=e.onGameSetup;Object(s.useTitle)("Monopoly Money");var t=de().storedGames;return r.a.createElement("div",{className:"home text-center"},r.a.createElement("h1",{className:"sr-only"},"Monopoly Money"),r.a.createElement("img",{src:y.a,className:"banner",alt:"Monopoly Money Banner"}),r.a.createElement("p",{className:"lead mt-2"},"An easy way to manage finances in your game of monopoly from the browser."),r.a.createElement("div",{className:"new-join-button-wrapper mt-4"},r.a.createElement(d.a,{size:"lg",onClick:function(){return Object(s.navigate)("/new-game")}},"New Game"),r.a.createElement(d.a,{size:"lg",onClick:function(){return Object(s.navigate)("/join")}},"Join Game")),r.a.createElement("div",{className:"mt-4"},r.a.createElement("h2",null,"Your Active Games"),t.length>0?r.a.createElement("div",{className:"active-game-cards"},t.sort((function(e,a){return e.time>a.time?-1:1})).map((function(e){var t=e.gameId,n=e.userToken,l=e.playerId,o=e.status,c=e.time;return r.a.createElement(K.a,{key:t,className:"mb-1"},r.a.createElement(K.a.Body,{className:"p-2"},r.a.createElement("div",{className:"text-left"},"Game ",t,r.a.createElement("small",{style:{float:"right"}},ae.DateTime.fromISO(c).toFormat("DD h:mm a"))),r.a.createElement("div",null,null===o||void 0===o?void 0:o.players.sort((function(e,a){return e.playerId===l?-1:0})).map((function(e){return r.a.createElement(Q.a,{key:e.playerId,variant:e.playerId===l?"dark":e.banker?"info":"success",className:"mr-1"},e.name,": ",fe(e.balance))})),null!==o&&r.a.createElement(Q.a,{variant:"warning"},"Free Parking: ",fe(o.freeParkingBalance))),r.a.createElement(d.a,{block:!0,size:"sm",variant:"outline-primary",onClick:function(){return a(t,n,l)},className:"mt-2"},"Join Game")))}))):r.a.createElement("div",null,"You have no active games")),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("h2",null,"What is Monopoly Money?"),r.a.createElement("p",null,"Monopoly Money is a webapp that helps you keep track of your finances in a game of Monopoly (or any game that uses currency)."),r.a.createElement("p",null,"Instead of using the cash that the game commonly comes with, you can play Monopoly like you're playing the credit card edition, but with your phone - a much more faster way to exchange money.")))},ve=(t(119),t(141)),ge=t(137),be=t(76),he=t(142),Ee=function(e){var a=e.balance,t=e.playerId,l=e.recipient,o=e.proposeTransaction,c=e.onClose,i=Object(n.useState)(""),s=Object(ee.a)(i,2),u=s[0],m=s[1],p=Object(n.useState)(null),f=Object(ee.a)(p,2),y=f[0],v=f[1];return r.a.createElement(ve.a,{show:!0,onHide:function(){v(null),c()},size:"lg",centered:!0,className:"send-money-modal"},r.a.createElement(ve.a.Header,{closeButton:!0},r.a.createElement(ve.a.Title,null,"Transfer Funds to ","freeParking"===l?"Free Parking":l.name)),r.a.createElement(ve.a.Body,null,r.a.createElement(ge.a,null,r.a.createElement(ge.a.Prepend,null,r.a.createElement(ge.a.Text,null,"Amount")),r.a.createElement("div",{className:"d-flex"},r.a.createElement(be.a,{type:"number",value:u,onChange:function(e){var a=e.currentTarget.value,t=parseInt(null!==a&&void 0!==a?a:"",10);m(isNaN(t)?"":"".concat(t))},className:"remove-left-border-radius remove-right-border-radius with-dollar-sign-input-icon"}),r.a.createElement("span",{className:"dollar-sign-input-icon"},"$")),r.a.createElement(d.a,{variant:"success",className:"remove-left-border-radius",onClick:function(){""===u?v("Please provide an amount"):parseInt(u,10)>a?v("You do not have enough money (".concat(fe(a),")")):(v(null),o(t,"freeParking"===l?"freeParking":l.playerId,parseInt(u,10)),c())}},"Send")),r.a.createElement(he.a.Text,{style:{color:"var(--danger)"}},y)))},Oe=t(77),ke=t(146),je=t(138),Ie=function(e){var a=e.gameId,t=e.isBanker,l=Object(Oe.useClipboard)({copiedTimeout:1e3}),o=Object(n.useRef)();return r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",{ref:o,onClick:function(){l.copy(a)}},a),r.a.createElement(ke.a,{target:o.current,show:l.copied,placement:"bottom"},(function(e){return r.a.createElement(je.a,Object.assign({id:"overlay-example"},e),"Copied to clipboard")})),t&&r.a.createElement("small",{className:"text-muted"},"You can hide this by closing the game in the settings."),r.a.createElement("hr",null))},we=function(e){var a,t=e.gameId,l=e.playerId,o=e.isGameOpen,i=e.players,s=e.freeParkingBalance,u=e.proposeTransaction,m=Object(n.useState)(null),p=Object(ee.a)(m,2),f=p[0],y=p[1],v=Object(c.b)((function(){var e;return r.a.createElement(r.a.Fragment,null,null!==f&&r.a.createElement(Ee,{balance:null!==(e=null===E||void 0===E?void 0:E.balance)&&void 0!==e?e:0,playerId:l,recipient:f,proposeTransaction:u,onClose:function(){return y(null)}}))}),[f]),g=Object(ee.a)(v,2),b=g[0],h=g[1];Object(n.useEffect)((function(){null!==f?b():h()}),[f,b,h]);var E=i.find((function(e){return e.playerId===l})),O=null!==(a=null===E||void 0===E?void 0:E.banker)&&void 0!==a&&a;return r.a.createElement("div",{className:"funds"},o&&r.a.createElement(Ie,{gameId:t,isBanker:O}),r.a.createElement(K.a,{className:"mb-1 text-center"},void 0!==E&&r.a.createElement(K.a.Body,{className:"p-3"},E.name,": ",fe(E.balance))),r.a.createElement("div",{className:"balance-grid"},i.filter((function(e){return e.playerId!==l})).sort((function(e,a){return e.name>a.name?1:a.name>e.name?-1:0})).map((function(e){return r.a.createElement(K.a,{key:e.name,className:"text-center"},r.a.createElement(K.a.Body,{className:"p-3"},r.a.createElement("div",null,e.name),r.a.createElement("div",null,fe(e.balance)),r.a.createElement(d.a,{size:"sm",variant:"outline-dark",className:"mt-2",onClick:function(){return y(e)}},"Send Money")))}))),r.a.createElement(K.a,{className:"mt-1 text-center"},r.a.createElement(K.a.Body,{className:"p-3"},r.a.createElement("div",null,"Free Parking: ",fe(s)),r.a.createElement(d.a,{size:"sm",variant:"outline-dark",className:"mt-2",onClick:function(){return y("freeParking")}},"Send Money"))))},Se=t(139),Ne=t(56),Pe=function(e){var a,t=e.label,l=e.submitText,o=e.players,c=e.onSubmit,i=t.toLowerCase().replace(" ","-"),s=Object(n.useState)(""),u=Object(ee.a)(s,2),m=u[0],p=u[1],f=Object(n.useState)(null),y=Object(ee.a)(f,2),v=y[0],g=y[1],b=""!==m&&null!==v;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"".concat(i,"-value")},t),r.a.createElement(ge.a,null,r.a.createElement(be.a,{type:"number",id:"".concat(i,"-value"),value:m,onChange:function(e){var a=e.currentTarget.value,t=parseInt(null!==a&&void 0!==a?a:"",10);p(isNaN(t)?"":"".concat(t))},className:"with-dollar-sign-input-icon"}),r.a.createElement("span",{className:"dollar-sign-input-icon"},"$"),r.a.createElement(Se.a,{variant:"outline-secondary",id:"".concat(i,"-player"),className:"mid-dropdown",title:null!==(a=null===v||void 0===v?void 0:v.name)&&void 0!==a?a:"Select Player"},o.map((function(e){return r.a.createElement(Ne.a.Item,{key:e.playerId,onClick:function(){return g(e)}},e.name)}))),r.a.createElement(ge.a.Append,null,r.a.createElement(d.a,{variant:"outline-secondary",onClick:function(){null!==v&&(c(parseInt(m,10),v.playerId),p(""),g(null))},disabled:!b},l))))},Ce=(t(122),function(e){var a,t=e.players,l=e.freeParkingBalance,o=e.onSubmit,c=Object(n.useState)(null),i=Object(ee.a)(c,2),s=i[0],u=i[1],m=null!==s;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"free-parking-player"},"Give Free Parking (",fe(l),")"),r.a.createElement(ge.a,null,r.a.createElement(Se.a,{as:ge.a.Prepend,variant:"outline-secondary",id:"free-parking-player",title:null!==(a=null===s||void 0===s?void 0:s.name)&&void 0!==a?a:"Select Player"},t.map((function(e){return r.a.createElement(Ne.a.Item,{key:e.playerId,onClick:function(){return u(e)}},e.name)}))),r.a.createElement(ge.a.Append,null,r.a.createElement(d.a,{variant:"outline-secondary",onClick:function(){null!==s&&(o(s.playerId),u(null))},disabled:!m},"Give"))))}),xe=function(e){var a=e.submitAmount,t=e.onClose,l=Object(n.useState)(""),o=Object(ee.a)(l,2),c=o[0],i=o[1],s=Object(n.useState)(null),u=Object(ee.a)(s,2),m=u[0],p=u[1];return r.a.createElement(ve.a,{show:!0,onHide:function(){p(null),t()},size:"lg",centered:!0,className:"send-money-modal"},r.a.createElement(ve.a.Header,{closeButton:!0},r.a.createElement(ve.a.Title,null,"Initialise Amount")),r.a.createElement(ve.a.Body,null,r.a.createElement("p",null,"Once you give a player money or initialise balances, you can not initialise balances again."),r.a.createElement(ge.a,null,r.a.createElement(ge.a.Prepend,null,r.a.createElement(ge.a.Text,null,"Amount")),r.a.createElement("div",{className:"d-flex"},r.a.createElement(be.a,{type:"number",value:c,onChange:function(e){var a=e.currentTarget.value,t=parseInt(null!==a&&void 0!==a?a:"",10);i(isNaN(t)?"":"".concat(t))},className:"remove-left-border-radius remove-right-border-radius with-dollar-sign-input-icon"}),r.a.createElement("span",{className:"dollar-sign-input-icon"},"$")),r.a.createElement(d.a,{variant:"success",className:"remove-left-border-radius",onClick:function(){""===c?p("Please provide an amount"):(p(null),a(parseInt(c,10)))}},"Send")),r.a.createElement(he.a.Text,{style:{color:"var(--danger)"}},m)))},Te=function(e){var a=e.players,t=e.proposeTransaction,n=Object(c.b)((function(){return r.a.createElement(xe,{submitAmount:function(e){a.forEach((function(a){t("bank",a.playerId,e)}))},onClose:i})})),l=Object(ee.a)(n,2),o=l[0],i=l[1];return r.a.createElement(d.a,{variant:"primary",block:!0,onClick:o},"Initialise Player Balances")},Ge=function(e){var a=e.players,t=e.freeParkingBalance,n=e.hasATransactionBeenMade,l=e.proposeTransaction;return r.a.createElement("div",{className:"bank"},!n&&r.a.createElement("div",{className:"mb-3"},r.a.createElement(Te,{players:a,proposeTransaction:l})),r.a.createElement("div",{className:"mb-3"},r.a.createElement(Pe,{label:"Give Money To Player",submitText:"Send",players:a,onSubmit:function(e,a){return l("bank",a,e)}})),r.a.createElement("div",{className:"mb-3"},r.a.createElement(Pe,{label:"Take Money From Player",submitText:"Take",players:a,onSubmit:function(e,a){return l("bank",a,-e)}})),r.a.createElement("div",{className:"mb-3"},r.a.createElement(Ce,{players:a,freeParkingBalance:t,onSubmit:function(e){return l("freeParking",e,t)}})))},Be=t(28),Me=(t(128),function(e,a,t){switch(e.type){case"playerJoin":var n=t.players.find((function(a){return a.playerId===e.playerId}));return{id:"".concat(e.type+e.time),title:"Player Join",detail:"".concat(n.name," joined"),colour:"cyan"};case"playerBankerStatusChange":var r=t.players.find((function(a){return a.playerId===e.playerId}));return{id:"".concat(e.type+e.time),title:"Player Banker Status Change",detail:"".concat(r.name," was made a banker"),colour:"yellow"};case"transaction":var l="bank"===e.to?"Bank":"freeParking"===e.to?"Free Parking":t.players.find((function(a){return a.playerId===e.to})).name,o="bank"===e.from?"Bank":"freeParking"===e.from?"Free Parking":t.players.find((function(a){return a.playerId===e.from})).name;return{id:"".concat(e.type+e.time),title:"Transaction",detail:"".concat(o," \u2192 ").concat(l," (").concat(fe(e.amount),")"),colour:"green"};case"playerNameChange":var c=a.players.find((function(a){return a.playerId===e.playerId})).name,i=t.players.find((function(a){return a.playerId===e.playerId})).name;return{id:"".concat(e.type+e.time),title:"Player Name Change",detail:"".concat(c," was renamed to ").concat(i),colour:"orange"};case"playerDelete":var s=a.players.find((function(a){return a.playerId===e.playerId})).name;return{id:"".concat(e.type+e.time),title:"Player Removal",detail:"".concat(s," was removed from the game"),colour:"red"};case"gameOpenStateChange":return{id:"".concat(e.type+e.time),title:"Game Open State Change",detail:"The game is now ".concat(e.open?"open":"closed"," to new players"),colour:"blue"}}}),ze=function(e){var a=e.events,t=Be.defaultGameState,n=a.map((function(e){var a=Object(Be.calculateGameState)([e],t),n=Me(e,t,a);return t=a,n}));return r.a.createElement("div",{className:"history"},n.reverse().map((function(e){return r.a.createElement("div",{key:e.id,className:"event mb-2"},r.a.createElement("div",{className:"bar",style:{background:"var(--".concat(e.colour,")")}}),r.a.createElement("div",{className:"event-details"},r.a.createElement("div",{className:"title"},r.a.createElement("small",null,e.title)),r.a.createElement("div",{className:"detail"},e.detail)))})))},De=t(140),Re=function(e){var a=e.player,t=e.proposePlayerNameChange,l=e.onClose,o=Object(n.useState)(a.name),c=Object(ee.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(null),m=Object(ee.a)(u,2),p=m[0],f=m[1];return r.a.createElement(ve.a,{show:!0,onHide:l,size:"lg",centered:!0},r.a.createElement(ve.a.Header,{closeButton:!0},r.a.createElement(ve.a.Title,null,"Change Player Name")),r.a.createElement(ve.a.Body,null,r.a.createElement(ge.a,null,r.a.createElement(ge.a.Prepend,null,r.a.createElement(ge.a.Text,null,"Name")),r.a.createElement(be.a,{value:i,onChange:function(e){return s(e.currentTarget.value)}}),r.a.createElement(d.a,{variant:"success",onClick:function(){f(""===i?"Name must not be empty":null),t(a.playerId,i),l()},className:"remove-left-border-radius"},"Rename")),r.a.createElement(he.a.Text,{style:{color:"var(--danger)"}},p)))},He=function(e){var a=e.player,t=e.proposePlayerDelete,n=e.onClose;return r.a.createElement(ve.a,{show:!0,onHide:n,size:"lg",centered:!0},r.a.createElement(ve.a.Header,{closeButton:!0},r.a.createElement(ve.a.Title,null,"Remove Player")),r.a.createElement(ve.a.Body,null,r.a.createElement("p",null,"Are you sure you want to remove ",a.name,"?")),r.a.createElement(ve.a.Footer,null,r.a.createElement(d.a,{variant:"danger",onClick:n},"Cancel"),r.a.createElement(d.a,{variant:"success",className:" ml-1",onClick:function(){t(a.playerId),n()}},"Remove")))},Fe=function(e){var a=e.proposeGameEnd,t=e.onClose;return r.a.createElement(ve.a,{show:!0,onHide:t,size:"lg",centered:!0},r.a.createElement(ve.a.Header,{closeButton:!0},r.a.createElement(ve.a.Title,null,"End Game")),r.a.createElement(ve.a.Body,null,r.a.createElement("p",null,"Are you sure you want to end the game?"),r.a.createElement("p",null,"This will kick everyone and you will not be able to re-join the game.")),r.a.createElement(ve.a.Footer,null,r.a.createElement(d.a,{variant:"danger",onClick:t},"Cancel"),r.a.createElement(d.a,{variant:"success",className:" ml-1",onClick:function(){a(),t()}},"End Game")))},Ae=function(e){var a=e.isGameOpen,t=e.players,l=e.proposePlayerNameChange,o=e.proposePlayerDelete,i=e.proposeGameOpenStateChange,s=e.proposeGameEnd,u=Object(n.useState)(null),m=Object(ee.a)(u,2),p=m[0],f=m[1],y=Object(c.b)((function(){return r.a.createElement(r.a.Fragment,null,null!==p&&r.a.createElement(Re,{player:p,proposePlayerNameChange:l,onClose:b}))}),[p]),v=Object(ee.a)(y,2),g=v[0],b=v[1],h=Object(c.b)((function(){return r.a.createElement(r.a.Fragment,null,null!==p&&r.a.createElement(He,{player:p,proposePlayerDelete:o,onClose:k}))}),[p]),E=Object(ee.a)(h,2),O=E[0],k=E[1],j=Object(c.b)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe,{proposeGameEnd:s,onClose:S}))}),[p]),I=Object(ee.a)(j,2),w=I[0],S=I[1];return r.a.createElement("div",null,r.a.createElement(De.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Balance"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.playerId},r.a.createElement("td",null,e.name),r.a.createElement("td",null,fe(e.balance)),r.a.createElement("td",null,r.a.createElement(d.a,{variant:"outline-secondary",size:"sm",title:"Rename",onClick:function(){f(e),g()}},r.a.createElement("span",{role:"img","aria-label":"Rename"},"\u270f\ufe0f")),r.a.createElement(d.a,{variant:"outline-danger",size:"sm",title:"Remove",className:"ml-1",onClick:function(){f(e),O()}},r.a.createElement("span",{role:"img","aria-label":"Remove"},"\ud83d\uddd1\ufe0f"))))})))),r.a.createElement(d.a,{block:!0,variant:"primary",onClick:function(){return i(!a)}},a?"Close":"Open"," Game To New Players"),r.a.createElement(d.a,{block:!0,variant:"danger",onClick:function(){return w()}},"End Game"))},Je=function(e){var a=e.newGame,t=e.onGameSetup,l=a?"Create Game":"Join Game";Object(s.useTitle)("".concat(l," - Monopoly Money"));var o=de(!1).storedGames,c=Object(n.useState)(!1),i=Object(ee.a)(c,2),u=i[0],m=i[1],p=Object(n.useState)(""),f=Object(ee.a)(p,2),y=f[0],v=f[1],g=Object(n.useState)(""),b=Object(ee.a)(g,2),h=b[0],E=b[1],O=Object(n.useState)(null),k=Object(ee.a)(O,2),j=k[0],I=k[1],w=Object(n.useState)(null),S=Object(ee.a)(w,2),N=S[0],P=S[1],C=-1!==o.map((function(e){return e.gameId})).indexOf(y),x=function(){if(C){var e=o.find((function(e){return e.gameId===y}));t(e.gameId,e.userToken,e.playerId)}else if(a){if(""===h)return void P("Please provide your name");P(null),m(!0),function(e){return fetch("".concat(ce.api.root,"/api/game"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){if(200===e.status)return e.json();throw new Error("Server Error (HTTP".concat(e.status,")"))}))}(h).then((function(e){t(e.gameId,e.userToken,e.playerId)})).catch((function(e){return console.log(e)})).finally((function(){return m(!1)}))}else{if(""===y)return void I("Please provide the game Id");if(I(null),""===h)return void P("Please provide your name");P(null),m(!0),ie(y,h).then((function(e){"DoesNotExist"===e?I("That game does not exist"):"NotOpen"===e?I("That game is not open. Ask the banker to open the game."):t(e.gameId,e.userToken,e.playerId)})).catch((function(e){return console.log(e)})).finally((function(){return m(!1)}))}};return r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,l),!a&&r.a.createElement(he.a.Group,null,r.a.createElement(he.a.Label,null,"Game Id"),r.a.createElement(he.a.Control,{placeholder:"123456",value:y,className:"text-center",onChange:function(e){var a;v(null!==(a=e.currentTarget.value)&&void 0!==a?a:"")}}),r.a.createElement(he.a.Text,{style:{color:"var(--danger)"}},j)),C?r.a.createElement("p",null,r.a.createElement("em",null,"You're already in this game - name is not required.")):r.a.createElement(he.a.Group,null,r.a.createElement(he.a.Label,null,"Your Name"),r.a.createElement(he.a.Control,{placeholder:"Name",value:h,className:"text-center",onChange:function(e){E(e.currentTarget.value)},onKeyDown:function(e){return"Enter"===e.key&&x()}}),r.a.createElement(he.a.Text,{style:{color:"var(--danger)"}},N)),r.a.createElement(d.a,{block:!0,variant:"primary",onClick:x,disabled:u},a?"Create":"Join"))},Le=t(79),We=t(80),Ye=t(81),Ve=function(){function e(a,t,n,r,l){var o=this;Object(We.a)(this,e),this.gameId=void 0,this.userToken=void 0,this.playerId=void 0,this.onGameStateChange=void 0,this.onDisplayMessage=void 0,this.events=[],this.webSocket=void 0,this.gameState=Be.defaultGameState,this.gameEnd=function(e){switch(o.webSocket.close(),e){case"end":o.onDisplayMessage("The game has been ended by the banker");break;case"removed":o.onDisplayMessage("You have been removed from the game");break;case"unexpectedWebSocketClosure":o.onDisplayMessage("Unexpectedly disconnection from the server")}},this.gameId=a,this.userToken=t,this.playerId=n,this.onGameStateChange=r,this.onDisplayMessage=l;var c=ce.api.root.replace(/http?/g,"ws");this.webSocket=new WebSocket("".concat(c,"/api/events")),this.webSocket.onmessage=this.onWebSocketMessage.bind(this),this.webSocket.addEventListener("open",(function(e){var a={type:"auth",gameId:o.gameId,userToken:o.userToken};o.webSocket.send(JSON.stringify(a))})),this.webSocket.addEventListener("close",(function(e){e.wasClean||(o.gameEnd("unexpectedWebSocketClosure"),o.onGameStateChange(!0))}))}return Object(Ye.a)(e,[{key:"getState",value:function(){return this.gameState}},{key:"getEvents",value:function(){return this.events}},{key:"amIABanker",value:function(){var e,a=this,t=this.gameState.players.find((function(e){return e.playerId===a.playerId}));return null!==(e=null===t||void 0===t?void 0:t.banker)&&void 0!==e&&e}},{key:"proposeTransaction",value:function(e,a,t){var n={time:"",actionedBy:"",type:"transaction",from:e,to:a,amount:t};this.submitEvent(n)}},{key:"proposePlayerNameChange",value:function(e,a){var t={time:"",actionedBy:"",type:"playerNameChange",playerId:e,name:a};this.submitEvent(t)}},{key:"proposePlayerDelete",value:function(e){var a={time:"",actionedBy:"",type:"playerDelete",playerId:e};this.submitEvent(a)}},{key:"proposeGameOpenStateChange",value:function(e){var a={time:"",actionedBy:"",type:"gameOpenStateChange",open:e};this.submitEvent(a)}},{key:"proposeGameEnd",value:function(){this.webSocket.send(JSON.stringify({type:"proposeEndGame"}))}},{key:"onWebSocketMessage",value:function(e){var a=JSON.parse(e.data);"initialEventArray"===a.type?(this.events=a.events,this.gameState=Object(Be.calculateGameState)(this.events,this.gameState)):"newEvent"===a.type?(this.events.push(a.event),this.gameState=Object(Be.calculateGameState)([a.event],this.gameState)):"gameEnd"===a.type&&this.gameEnd("end");var t=-1!==this.gameState.players.map((function(e){return e.playerId})).indexOf(this.playerId);t||this.gameEnd("removed");var n="gameEnd"===a.type||!t;this.onGameStateChange(n)}},{key:"submitEvent",value:function(e){var a={type:"proposeEvent",event:e};this.webSocket.send(JSON.stringify(a))}}]),e}(),$e=function(e){var a=Le.a.info(e,{position:"bottom-center",hideAfter:10,onClick:function(){return a&&a()}}).hide},_e=function(){var e=Object(n.useState)(null),a=Object(ee.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(),o=Object(ee.a)(l,2)[1],c=Object(n.useCallback)((function(){return o({})}),[]);return{initialize:function(e){var a=e.gameId,t=e.userToken,n=e.playerId;r(new Ve(a,t,n,(function(e){e?r(null):c()}),$e))},clear:function(){null!==t&&t.gameEnd(null),r(null)},authInfo:null===t?null:{gameId:t.gameId,userToken:t.userToken,playerId:t.playerId},game:null===t?null:Object(Z.a)({},t.getState(),{gameId:t.gameId,playerId:t.playerId,isBanker:t.amIABanker(),events:t.getEvents(),actions:{proposeTransaction:t.proposeTransaction.bind(t),proposePlayerNameChange:t.proposePlayerNameChange.bind(t),proposePlayerDelete:t.proposePlayerDelete.bind(t),proposeGameOpenStateChange:t.proposeGameOpenStateChange.bind(t),proposeGameEnd:t.proposeGameEnd.bind(t)}})}},Ue=function(e,a){return r.a.createElement($,{route:e},r.a.createElement(q,null,a))},qe=function(){var e,a,t=de().storeGame,l=_e(),o=l.game,c=l.authInfo,u=l.initialize,m=l.clear,p=Object(s.usePath)();Object(n.useEffect)((function(){p!==J.home&&p!==J.join&&p!==J.newGame||f()}),[p]),Object(n.useEffect)((function(){-1===Object.values(J).indexOf(p)&&Object(s.navigate)("/")}),[p]),Object(n.useEffect)((function(){null===o&&Object(s.navigate)("/")}),[o]);var d=function(e,a,n){null!==c&&t(c.gameId,c.userToken,c.playerId),u({gameId:e,userToken:a,playerId:n}),t(e,a,n),Object(s.navigate)("/funds")},f=function(){null!==c&&t(c.gameId,c.userToken,c.playerId),m()},y=function(){return r.a.createElement(ye,{onGameSetup:d})},v=(e={},Object(i.a)(e,J.home,(function(){return Ue(J.home,r.a.createElement(ye,{onGameSetup:d}))})),Object(i.a)(e,J.join,(function(){return Ue(J.join,r.a.createElement(Je,{newGame:!1,onGameSetup:d}))})),Object(i.a)(e,J.newGame,(function(){return Ue(J.newGame,r.a.createElement(Je,{newGame:!0,onGameSetup:d}))})),Object(i.a)(e,J.funds,null!==o?function(){return Ue(J.funds,r.a.createElement(we,{gameId:o.gameId,playerId:o.playerId,isGameOpen:o.open,players:o.players,freeParkingBalance:o.freeParkingBalance,proposeTransaction:o.actions.proposeTransaction}))}:function(){return r.a.createElement(y,null)}),Object(i.a)(e,J.bank,null!==o&&o.isBanker?function(){return Ue(J.bank,r.a.createElement(Ge,{players:o.players,freeParkingBalance:o.freeParkingBalance,hasATransactionBeenMade:o.events.filter((function(e){return"transaction"===e.type})).length>0,proposeTransaction:o.actions.proposeTransaction}))}:function(){return r.a.createElement(y,null)}),Object(i.a)(e,J.history,null!==o?function(){return Ue(J.history,r.a.createElement(ze,{events:o.events}))}:function(){return r.a.createElement(y,null)}),Object(i.a)(e,J.settings,null!==o&&o.isBanker?function(){return Ue(J.settings,r.a.createElement(Ae,{isGameOpen:o.open,players:o.players,proposePlayerNameChange:o.actions.proposePlayerNameChange,proposePlayerDelete:o.actions.proposePlayerDelete,proposeGameOpenStateChange:o.actions.proposeGameOpenStateChange,proposeGameEnd:o.actions.proposeGameEnd}))}:function(){return r.a.createElement(y,null)}),e),g=Object(s.useRoutes)(v);return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{inGame:null!==o,isBanker:null!==(a=null===o||void 0===o?void 0:o.isBanker)&&void 0!==a&&a}),r.a.createElement("div",{className:"my-3"},g||r.a.createElement(y,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,null,r.a.createElement(qe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},28:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t(123);a.defaultGameState=n.defaultGameState,a.calculateGameState=n.calculateGameState},29:function(e,a,t){e.exports=t.p+"static/media/banner.6db68e8e.png"},82:function(e,a,t){e.exports=t(129)},87:function(e,a,t){},99:function(e,a,t){}},[[82,1,2]]]);
//# sourceMappingURL=main.d6d9fbc3.chunk.js.map